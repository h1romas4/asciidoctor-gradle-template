include::../attribute.adoc[]

[[project-structure]]
== Asciidoc 記法

ここでは Asciidoc 文書で利用可能な記法の中で、特に技術文書で使いそうなものを取り上げて解説します。

なお、プロジェクトフォルダの ``.vscode/asciidoc.code-snippets`` 設定には VS Code の btn:[Ctrl + Spaec] 操作で補完可能な形式で Asciidoc 記法のスニペットが格納されています。プロジェクトで定形の記法があれが追加・修正すると便利でしょう。

image::2023-06-30-15-39-26.png[pdfwidth=60%, width=60%]

=== 文書中の相互参照

文書内の参照リンクは ``.adoc`` 文書中で次のように指定します。HTML/PDF でクリックリンクが生成されます。

[source]
----
[[project-structure]] // <1>
== Asciidoc 記法

[[introduction]] // <2>
== はじめに

<<project-structure,章の冒頭>> // <1>
<<Chapter01/index.adoc#introduction,はじめに>> <2>
----

<1> 同一 `.adoc` 内での内部参照
<2> `.adoc` をまたいだドキュメント間参照

リンクの例

* <<project-structure,章の冒頭>> を参照してください･･･
* <<Chapter01/index.adoc#introduction,はじめに>> で述べたように･･･

=== 外部リンク

インターネット上の URL は自動的にリンクに変換されます。

https://h1romas4.github.io/asciidoctor-gradle-template/index.html

次のように URL の末尾に ``[]`` を定義すると指定した文字列からのリンクとなります。

[source]
----
https://h1romas4.github.io/asciidoctor-gradle-template/index.html[AsciidoctorとGradleでつくる文書執筆環境]
----

https://h1romas4.github.io/asciidoctor-gradle-template/index.html[AsciidoctorとGradleでつくる文書執筆環境]

TIP: PDF の印刷を考慮する場合は、文字列リンクを用いると URL の情報が消えてしまうため、次項の引用機能を用いると良いでしょう。

=== 引用

外部の文献を参照する引用は次のように記述します。執筆している文書が紙面となり、引用先がウェブサイトの場合はいずれかの位置に URL を掲載します。

[source]
-----
[quote, Asciidoctor Documentation Site]
____
https://docs.asciidoctor.org/

Welcome to the Asciidoctor documentation site! Here you can find the reference material, guides, and examples to write content in AsciiDoc and publish it using Asciidoctor. This documentation will help you start your journey with AsciiDoc or dive deeper if you're already well on your way.
____
-----

[quote, Asciidoctor Documentation Site]
____
https://docs.asciidoctor.org/

Welcome to the Asciidoctor documentation site! Here you can find the reference material, guides, and examples to write content in AsciiDoc and publish it using Asciidoctor. This documentation will help you start your journey with AsciiDoc or dive deeper if you're already well on your way.
____

=== 画像

画像の挿入は、画像ファイルを編集中の ``.adoc`` 文書から相対パスでみた ``images/`` フォルダに格納した上で、次のように記述します。

[source]
[caption=""]
----
image::2023-06-30-12-11-56.png[pdfwidth=70%, width=600px]
----

``pdfwidth`` 属性では PDF 紙面に対する幅の比率を、``width`` 属性では HTML 文書中での幅の比率もしくはピクセル値を指定します。

なお、本手順の Asciidoc 文書の構成では ``images`` に格納されている画像ファイルパスに ``images/`` を付与する必要はありません。

TIP: これは ``src/docs/asciidoc/attribute.adoc`` で ``:imagesdir: ./images`` が設定済みであるための動作です。

=== ソースコードシンタックスハイライト

``[source]`` ブロックを用いて文書中にソースコードをシンタックスハイライト付きで埋め込みます。また、ソースコードに ``// <1>`` などのコメント形式でソースコード下部に対応する説明が記述できます。

[source]
-----
[source, javascript]
[caption=""]
.JavaScript ソースコードのシンタックスハイライトの例
----
function hello() {
    console.log("Hello, World!"); // \<1>
}
----

<1> コンソールに ``Hello, World`` を出力
-----

[source, javascript]
[caption=""]
.JavaScript ソースコードのシンタックスハイライトの例
----
function hello() {
    console.log("Hello, World!"); // <1>
}
----

<1> コンソールに ``Hello, World`` を出力

=== インラインコマンド・ファイル名

文中に現れるコマンドやファイル名などは ``コマンド`` で記述します。

[source]
----
``コマンド``
----

=== メニュー・ボタン

コンピュータの操作で使われる menu:メニュー[File > Open] や btn:[OK] ボタンなどは次のように記述します。

[source]
----
menu:メニュー[File > Open]

btn:[OK] ボタン
----

=== ファイルインクルード

`.adoc` ファイルから別のファイルをインクルードできます。ソースコードや後述のダイアグラム形式などを別ファイルとして切り出すのに便利です。

IMPORTANT: Gradle のファイル更新監視は `.adoc` からインクルードされたファイルまでは及びません。インクルード先のファイルだけを書き換えた場合は `./gradlew docs` が処理なしで終了してしまいますので、この場合は `./gradlew clean` するなどしてからリビルドしてください。

[source]
-----
[source, rust]
----
\include::source/hello.rs[]
----
-----

[source, rust]
[caption=""]
.インクルードにより挿入されたソースコードの例
----
include::source/hello.rs[]
----

=== 表形式

表形式は次のようなコードで定義します。属性の ``cols="1,2"`` はカラムの比率です。また、データ形式、罫線表現に関していくつかのオプションが設定できます。

[source]
[caption=""]
.表形式の例1（CSV 形式、ヘッダーなし、グリッドなし）
-----
[format="csv",cols="1,2"]
[frame="topbot",grid="none"]
[caption=""]
.表形式の例1
|======
カラム1,カラム2
キー1,バリュー1
キー2,バリュー2
|======
-----

[format="csv",cols="1,2"]
[frame="topbot",grid="none"]
[caption=""]
|======
キー1,バリュー1
キー2,バリュー2
キー3,バリュー3
|======

[source, javascript]
[caption=""]
.表形式の例2（デフォルト形式、ヘッダーあり、グリッドあり）
-----
[cols="1,2", options="header"]
[frame="topbot"]
[caption=""]
.表形式の例2
|======
|カラム名1
|カラム名2

|キー1
|バリュー1

|キー2
|バリュー2
|======
-----

[cols="1,2", options="header"]
[frame="topbot"]
|======
|カラム名1
|カラム名2

|キー1
|バリュー1

|キー2
|バリュー2
|======

=== リスト

箇条書き表現は次のように記述します。

Asciidoc はリスト中にリスト継続マーカ（``+``）を使うことでブロックのネストが可能です。手順を順序ありリストで表現し、順序やインデントを維持しながら画像や表形式などの挿入をします。

[source]
----
. 手順1
. 手順2
+
リスト継続1
+
image::2023-06-30-15-39-26.png[pdfwidth=60%, width=60%]
. 手順3
.. 箇条書きのネスト1
... 箇条書きのネスト2
*** 順序なしリスト1
*** 順序なしリスト2
----

. 手順1
. 手順2
+
リスト継続1
+
image::2023-06-30-15-39-26.png[pdfwidth=60%, width=60%]
. 手順3
.. 箇条書きのネスト1
... 箇条書きのネスト2
*** 順序なしリスト1
*** 順序なしリスト2

<<<<

=== 脚注

補足点を脚注するいくつかの表現があります。

[source]
-----
NOTE: メモ

TIP: チップス

IMPORTANT: 重要

WARNING: 警告

CAUTION: 注意
-----

NOTE: メモ

TIP: チップス

IMPORTANT: 重要

WARNING: 警告

CAUTION: 注意

脚注が長文になる場合は次のようにブロックを用います。

[source]
-----
[NOTE]
====
改行を含む脚注です。

吾輩は脚注である。名前はまだ無い。
====
-----

[NOTE]
====
改行を含む脚注です。

吾輩は脚注である。名前はまだ無い。
====

<<<<

=== 改ページ・水平線

改ページは次の記述で挿入します。PDF 文書のみに効果があり HTML 文書には影響しません。

[source]
----
<<<<
----

水平線は HTML/PDF 文書のどちらでも有効です。

[source]
----
- - -
----

- - -

=== コラム表現

Asciidoc のサイドバーとブロック名称機能を組み合わせ、コラム表現を挿入します。

[source]
-----
.コラム
****
ブロックを使ってコラム表現を挿入します。

吾輩はコラムである。名前はまだ無い。
****
-----

.コラム
****
ブロックを使ってコラム表現を挿入します。

吾輩はコラムである。名前はまだ無い。
****

=== コメント行

成果物に現れない Asciidoc 文書へのコメントは次のように文頭に ``//`` で記述します。

[source]
----
// TODO: さらに Asciidoc 記法を追加していくこと。
----

// TODO: さらに Asciidoc 記法を追加していくこと。
