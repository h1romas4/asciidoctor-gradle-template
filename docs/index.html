<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="https://github.com/h1romas4/asciidoctor-gradle-template">
<title>AsciidoctorとGradleでつくる文書執筆環境</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:'Hiragino Sans',sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-weight:bold}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:"Courier New",monospace;}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
/* fix serif; body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased} */
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:'Hiragino Sans',"Noto Serif","DejaVu Serif";font-weight:300;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:300;font-size:1em;line-height:1.7;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-weight:bold}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:'Hiragino Sans',"Open Sans","DejaVu Sans",sans-serif;font-weight:500;font-style:normal;color:#2d466b;text-rendering:optimizeLegibility;margin-top:1.5em;margin-bottom:1.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-weight:bold;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Courier New",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1.0625rem;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Courier New",monospace;font-size:16px;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Courier New",monospace;display:inline-block;color:rgba(0,0,0,.8);line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:#2d466b;margin-top:2.25rem;margin-bottom:0;font-weight:500;}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-weight:bold}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#2d466b;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#2d466b;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:2em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:'Hiragino Sans',"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-weight:normal}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-top:3em;margin-bottom:3em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#2d466b;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.listingblock{margin: 2em 0}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:2.25em 1em 2.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
/* fix font style; .quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-weight:bold;text-align:justify} */
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1em;line-height:1.75;word-spacing:.1em;letter-spacing:0;}
.quoteblock blockquote{margin:0;padding:0;border:0;background-color:#fff;}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#2d466b;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-weight:normal}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate;margin: 2em 0;}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock{margin: 2em 0}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock{margin: 2em 0}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book">
<div id="header">
<h1>AsciidoctorとGradleでつくる文書執筆環境</h1>
<div class="details">
<span id="author" class="author">https://github.com/h1romas4/asciidoctor-gradle-template</span><br>
<span id="revnumber">バージョン 4.1.0,</span>
<span id="revdate">2023-10-01</span>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction">はじめに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本文書は <strong>Asciidoc</strong> とその Ruby による実装である <strong>Asciidoctor</strong> を用いて Asciidoc 文書を執筆する環境を構築するガイドです。実行環境は macOS、Linux、Windows の各 OS に対応しています。</p>
</div>
<div class="paragraph">
<p>この文書の手順から次のことができるようになります。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Asciidoc 形式で執筆した文書を HTML/PDF 形式に変換</dt>
<dd>
<p>Asciidoc 文書変換用 Gradle ビルドの実行</p>
</dd>
<dt class="hdlist1">テキストエディターで変換結果をリアルタイムにプレビューしながら文書を編集</dt>
<dd>
<p>Visual Studio Code と AsciiDoc 拡張の設定</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Asciidoc は表現力の高い文書をテキストファイルベースで執筆できる軽量なマークアップ言語です。他の軽量テキストマークアップが持たない文書間のインクルードやソースコードの挿入などの機能も有し、かつ簡潔です。特に技術文書の執筆には大きな力を発揮することでしょう。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Asciidoc の表現力を示すひとつの例は、このような脚注表現です。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>一般的にテキストプロセッサーを用いた執筆とパブリッシング環境を整えるには多くの準備が必要ですが、本文書の手順は極力初期導入するプロダクトを少なく、簡単に快適な執筆環境を整えられるよう考えられました。</p>
</div>
<div class="paragraph">
<p>具体的には文書の変換に、実行を JVM 環境だけに依存する <strong>AsciidoctorJ</strong> と <strong>Gradle</strong> を活用し、執筆環境については <strong>Visual Studio Code</strong> を用いることでリアルタイムに文書をプレビューしながら、最後にコマンド一つで HTML/PDF 化できるように準備しました。またさらに、クラウド統合環境である Gitpod や GitHub の Codespaces もサポートし、ウェブブラウザだけでの執筆・変換も実現しています。</p>
</div>
<div class="paragraph">
<p>手間がかかることが多い PDF 出力に関しても、フォントセットや禁則処理設定をプロジェクトに持たせることにより、実行環境に関わらず同一出力が得られるように調整しました。</p>
</div>
<div class="paragraph">
<p>Asciidoc による文書の執筆は形式的で効率が良く、また更新差分が取りやすいため、文書履歴管理や共同執筆環境としても有効です。このメリットをさらに活用するため、本文書ではバージョン管理システムの Git やテキストダイアグラム記法による図形や数式のベクター画像挿入をフォローしています。</p>
</div>
<div class="paragraph">
<p>本文書がみなさんの執筆活動のお手伝いになれば幸いです。</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_asciidoc_と_asciidoctor_について">Asciidoc と Asciidoctor について</h3>
<div class="paragraph">
<p>Asciidoc は人が読み書きしやすいプレーンテキスト文書から、HTML や PDF をはじめとした様々な出版形式に出力が行える軽量のマークアップ言語です。通常のテキストファイルを使った表現と似ていることから習得がしやすく、また出版向きの表現力も兼ね備えています。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>About AsciiDoc</p>
</div>
<div class="paragraph">
<p>AsciiDoc is a lightweight and semantic markup language primarily designed for writing technical documentation. The language can be used to produce a variety of presentation-rich output formats, all from content encoded in a concise, human-readable, plain text format.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; AsciiDoc Language Documentation
</div>
</div>
<div class="paragraph">
<p>Asciidoctor は Ruby でかかれた Asciidoc の実装です。構文木解析や各種出版フォーマットへの変換を実現します。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.asciidoctor.org/asciidoctor/latest/" class="bare">https://docs.asciidoctor.org/asciidoctor/latest/</a></p>
</div>
<div class="paragraph">
<p>What is Asciidoctor?</p>
</div>
<div class="paragraph">
<p>Asciidoctor is a fast, open source, text processor for parsing AsciiDoc into a document model, then converting it to output formats such as HTML 5, DocBook 5, man(ual) pages, PDF, and EPUB 3. Asciidoctor is written in the Ruby programming language.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Asciidoctor Documentation
</div>
</div>
<div class="paragraph">
<p>同プロジェクトにおいて、ウェブブラウザ上で Asciidoc の動作を実現する Asciidoctor.js や、PDF 出力を行う Asciidoctor PDF が提供されています。また、AsciidoctorJ は、Ruby 実装である Asciidoctor を Java でかかれた Ruby 実行環境である JRuby を使って Java VM 上で動作させるプロダクトとなっています。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_ライセンス">ライセンス</h3>
<div class="paragraph">
<p>本文書に含まれる筆者が作成したビルドスクリプト、サンプル文書 <code>.adoc</code>、ダイアグラムのなどのソースは全て <strong>MIT License</strong> です。ライセンスに従って自由にご利用ください。</p>
</div>
<div class="paragraph">
<p>リポジトリのソースやライセンスファイルは次から参照できます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://github.com/h1romas4/asciidoctor-gradle-template" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template</a></p>
</div>
<div class="paragraph">
<p>AsciidoctorとGradleでつくる文書執筆環境</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://github.com/h1romas4
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="https://h1romas4.github.io/asciidoctor-gradle-template/index.pdf">本文書の PDF 版の表紙</a>は <a href="https://github.com/Fujix1/">@Fujix さん</a> によって作成されました。</p>
</div>
<div class="paragraph">
<p>素敵なデザインをありがとうございました。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_謝辞">謝辞</h3>
<div class="paragraph">
<p>本文書の実装であるビルドスクリプトやテーマでは次のプロダクトと技術資料が使われています。</p>
</div>
<div class="paragraph">
<p>プロダクト名の隣にライセンスを併記しました。商用利用等で制限のあるプロダクトはありませんが、それぞれライセンスを確認してください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Font</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>源真ゴシック - SIL Open Font License 1.1  - <a href="http://jikasei.me/font/genshin/" class="bare">http://jikasei.me/font/genshin/</a></p>
</li>
<li>
<p>源様明朝 - SIL Open Font License 1.1 - <a href="https://github.com/ButTaiwan/genyo-font" class="bare">https://github.com/ButTaiwan/genyo-font</a></p>
</li>
<li>
<p>Ricty Diminished - SIL Open Font License 1.1 - <a href="https://github.com/edihbrandon/RictyDiminished" class="bare">https://github.com/edihbrandon/RictyDiminished</a></p>
</li>
<li>
<p>Morisawa BIZ UDGothic - SIL Open Font License 1.1 - <a href="https://github.com/googlefonts/morisawa-biz-ud-gothic" class="bare">https://github.com/googlefonts/morisawa-biz-ud-gothic</a></p>
</li>
<li>
<p>Morisawa BIZ UDMincho  - SIL Open Font License 1.1 - <a href="https://github.com/googlefonts/morisawa-biz-ud-mincho" class="bare">https://github.com/googlefonts/morisawa-biz-ud-mincho</a></p>
</li>
<li>
<p>Open Iconic - MIT License - <a href="https://github.com/iconic/open-iconic/" class="bare">https://github.com/iconic/open-iconic/</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Asciidoc</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Asciidoctor - MIT License - <a href="https://asciidoctor.org/" class="bare">https://asciidoctor.org/</a></p>
</li>
<li>
<p>Asciidoctorj - Apache License 2.0 - <a href="https://github.com/asciidoctor/asciidoctorj" class="bare">https://github.com/asciidoctor/asciidoctorj</a></p>
</li>
<li>
<p>Asciidoctor.js - MIT License - <a href="https://asciidoctor.org/docs/asciidoctor.js/" class="bare">https://asciidoctor.org/docs/asciidoctor.js/</a></p>
</li>
<li>
<p>Asciidoctor PDF - MIT License - <a href="https://asciidoctor.org/docs/asciidoctor-pdf/" class="bare">https://asciidoctor.org/docs/asciidoctor-pdf/</a></p>
</li>
<li>
<p>Asciidoctor Gradle Plugin Suite - Apache License 2.0 - <a href="https://github.com/asciidoctor/asciidoctor-gradle-plugin" class="bare">https://github.com/asciidoctor/asciidoctor-gradle-plugin</a></p>
</li>
<li>
<p>asciidoctor-pdf-linewrap-ja - MIT License - <a href="https://github.com/fuka/asciidoctor-pdf-linewrap-ja" class="bare">https://github.com/fuka/asciidoctor-pdf-linewrap-ja</a></p>
</li>
<li>
<p>asciidoctor-nabetani - MIT License - <a href="https://github.com/nabetani/asciidoctor-nabetani" class="bare">https://github.com/nabetani/asciidoctor-nabetani</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Diagram</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>PlantUML - Multi(MIT/Apache/BSD/EPL/GPLv3/LGPL) - <a href="https://github.com/plantuml/plantuml" class="bare">https://github.com/plantuml/plantuml</a></p>
</li>
<li>
<p>ditaa - LGPL-3.0 license - <a href="https://github.com/stathissideris/ditaa" class="bare">https://github.com/stathissideris/ditaa</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Build Tool</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>SDKMAN - Apache License 2.0 - <a href="https://sdkman.io/" class="bare">https://sdkman.io/</a></p>
</li>
<li>
<p>Gradle - Apache License 2.0 - <a href="https://gradle.org/" class="bare">https://gradle.org/</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Text Editor</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Visual Studio Code - Microsoft - <a href="https://code.visualstudio.com/" class="bare">https://code.visualstudio.com/</a></p>
</li>
<li>
<p>asciidoctor-vscode - MIT License - <a href="https://github.com/asciidoctor/asciidoctor-vscode" class="bare">https://github.com/asciidoctor/asciidoctor-vscode</a></p>
</li>
<li>
<p>vscode-paste-image - MIT License - <a href="https://github.com/mushanshitiancai/vscode-paste-image" class="bare">https://github.com/mushanshitiancai/vscode-paste-image</a></p>
</li>
<li>
<p>vscode-plantuml - MIT License - <a href="https://github.com/qjebbs/vscode-plantuml" class="bare">https://github.com/qjebbs/vscode-plantuml</a></p>
</li>
<li>
<p>Code Spell Checker - GPL - <a href="https://github.com/streetsidesoftware/vscode-spell-checker" class="bare">https://github.com/streetsidesoftware/vscode-spell-checker</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Guide</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>asciidoctor-pdfでかっこいいPDFを作る - <a href="https://qiita.com/kuboaki/items/67774c5ebd41467b83e2" class="bare">https://qiita.com/kuboaki/items/67774c5ebd41467b83e2</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>素晴らしい成果を公開されているみなさまに感謝します。</p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">目次</div>
<ul class="sectlevel1">
<li><a href="#introduction">はじめに</a>
<ul class="sectlevel2">
<li><a href="#_asciidoc_と_asciidoctor_について">Asciidoc と Asciidoctor について</a></li>
<li><a href="#_ライセンス">ライセンス</a></li>
<li><a href="#_謝辞">謝辞</a></li>
</ul>
</li>
<li><a href="#_asciidoc_文書変換用スクリプトを使う準備">1. Asciidoc 文書変換用スクリプトを使う準備</a>
<ul class="sectlevel2">
<li><a href="#_java_実行環境の導入macos_linux">1.1. Java 実行環境の導入（macOS / Linux）</a></li>
<li><a href="#_java_実行環境の導入windows">1.2. Java 実行環境の導入（Windows）</a></li>
</ul>
</li>
<li><a href="#_asciidoc_から_htmlpdf_文書を作成する">2. Asciidoc から HTML/PDF 文書を作成する</a>
<ul class="sectlevel2">
<li><a href="#_サンプル文書の変換を試す">2.1. サンプル文書の変換を試す</a></li>
<li><a href="#_変換後の文書">2.2. 変換後の文書</a></li>
<li><a href="#_テキストエディタで_asciidoc_文書を編集する">2.3. テキストエディタで Asciidoc 文書を編集する</a></li>
<li><a href="#_文書のファイル構成">2.4. 文書のファイル構成</a></li>
<li><a href="#_執筆の開始">2.5. 執筆の開始</a></li>
<li><a href="#_執筆のイテレーション">2.6. 執筆のイテレーション</a></li>
<li><a href="#_文書の_git_管理">2.7. 文書の Git 管理</a></li>
<li><a href="#_クラウド環境による執筆">2.8. クラウド環境による執筆</a></li>
<li><a href="#_クラウド環境でのファイル保存と執筆の再開">2.9. クラウド環境でのファイル保存と執筆の再開</a></li>
<li><a href="#_github_actions_によるビルド">2.10. GitHub Actions によるビルド</a></li>
</ul>
</li>
<li><a href="#project-structure">3. Asciidoc 記法</a>
<ul class="sectlevel2">
<li><a href="#_ドキュメントヘッダーとセクションタイトル">3.1. ドキュメントヘッダーとセクションタイトル</a></li>
<li><a href="#_段落">3.2. 段落</a></li>
<li><a href="#_文章中のテキストフォーマット">3.3. 文章中のテキストフォーマット</a></li>
<li><a href="#_文書中の相互参照">3.4. 文書中の相互参照</a></li>
<li><a href="#_外部リンク">3.5. 外部リンク</a></li>
<li><a href="#_引用">3.6. 引用</a></li>
<li><a href="#_画像">3.7. 画像</a></li>
<li><a href="#_ソースコードシンタックスハイライト">3.8. ソースコードシンタックスハイライト</a></li>
<li><a href="#_メニューボタン">3.9. メニュー・ボタン</a></li>
<li><a href="#_ファイルインクルード">3.10. ファイルインクルード</a></li>
<li><a href="#_表形式">3.11. 表形式</a></li>
<li><a href="#_リスト">3.12. リスト</a></li>
<li><a href="#_脚注">3.13. 脚注</a></li>
<li><a href="#_改ページブレイク表現">3.14. 改ページ・ブレイク表現</a></li>
<li><a href="#_ラベル文言">3.15. ラベル文言</a></li>
<li><a href="#_コラム表現">3.16. コラム表現</a></li>
<li><a href="#_コメント行">3.17. コメント行</a></li>
</ul>
</li>
<li><a href="#_ダイアグラム記法">4. ダイアグラム記法</a>
<ul class="sectlevel2">
<li><a href="#_シーケンス図">4.1. シーケンス図</a></li>
<li><a href="#_フォルダファイルツリー">4.2. フォルダ・ファイルツリー</a></li>
<li><a href="#_数式">4.3. 数式</a></li>
<li><a href="#_ブロック図">4.4. ブロック図</a></li>
<li><a href="#_メモリーマップ">4.5. メモリーマップ</a></li>
<li><a href="#_ネットワーク構成図">4.6. ネットワーク構成図</a></li>
<li><a href="#_システム構成図">4.7. システム構成図</a></li>
<li><a href="#_タイミングチャート">4.8. タイミングチャート</a></li>
<li><a href="#_マインドマップ">4.9. マインドマップ</a></li>
</ul>
</li>
<li><a href="#_奥付">奥付</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asciidoc_文書変換用スクリプトを使う準備">1. Asciidoc 文書変換用スクリプトを使う準備</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本文書で用いる Asciidoc 文書変換用スクリプトはビルドツールである Gradle を活用しており、実行するためには Java 実行環境が必要です。</p>
</div>
<div class="paragraph">
<p>お使いのコンピューターのコマンドライン環境（macOS/Linux ではターミナル、Windows では cmd.exe か powershell.exe）で <code>java -version</code> コマンドを入力し、Java 11 以上のバージョンが表示されるようであれば既に環境の準備は整っています。</p>
</div>
<div class="listingblock">
<div class="title">macOS/Linux の場合</div>
<div class="content">
<pre class="rouge highlight"><code>$ java -version
openjdk 11.0.20.1 2023-08-24
OpenJDK Runtime Environment Temurin-11.0.20.1+1 (build 11.0.20.1+1)
OpenJDK 64-Bit Server VM Temurin-11.0.20.1+1 (build 11.0.20.1+1, mixed mode)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Windows の場合</div>
<div class="content">
<pre class="rouge highlight"><code>C:¥&gt; java -version
openjdk version "11.0.20.1" 2023-08-24
OpenJDK Runtime Environment Temurin-11.0.20.1+1 (build 11.0.20.1+1)
OpenJDK 64-Bit Server VM Temurin-11.0.20.1+1 (build 11.0.20.1+1, mixed mode)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
本文書では Java 11 を用いて解説します。また、ビルド時に僅かに内部処理のワーニングが出力されますが Java 17 でも期待通り動作することを確認しています。Java 21 に関しては周辺ツール対応待ちのステータスです。
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Graphviz の導入</div>
<div class="paragraph">
<p>macOS 及び Linux で、後述するダイアグラム記法の全てを変換するには Graphviz 画像ライブラリの導入が必要です。この文書のサンプルソースでも依存している部分が一部ありますので、ワーニングなしに本文書の完全なファイルを生成したい場合は次のようにインストールしてください。Windows の場合は内部で処理されるため、この操作は不要です。</p>
</div>
<div class="listingblock">
<div class="title">macOS</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">brew <span class="nb">install </span>graphviz</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ubuntu</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>graphviz</code></pre>
</div>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_java_実行環境の導入macos_linux">1.1. Java 実行環境の導入（macOS / Linux）</h3>
<div class="paragraph">
<p>もし macOS / Linux 環境に Java 実行環境がなければ <strong>SDKMAN</strong> を利用することで、ターミナルから簡単に導入できます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://sdkman.io/" class="bare">https://sdkman.io/</a></p>
</div>
<div class="paragraph">
<p>SDKMAN! is a tool for managing parallel versions of multiple Software Development Kits on most Unix based systems.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; SDKMAN
</div>
</div>
<div class="listingblock">
<div class="title">手順. SDKMAN を用いた Java の導入</div>
<div class="content">
<pre class="rouge highlight"><code>$ curl -s "https://get.sdkman.io" | bash <i class="conum" data-value="1"></i><b>(1)</b>
$ source "$HOME/.sdkman/bin/sdkman-init.sh" <i class="conum" data-value="2"></i><b>(2)</b>
$ sdk list java <i class="conum" data-value="3"></i><b>(3)</b>
================================================================================
Available Java Versions for Linux 64bit
================================================================================
 Vendor        | Use | Version      | Dist    | Status     | Identifier
--------------------------------------------------------------------------------
 Temurin       |     | 20.0.2       | tem     |            | 20.0.2-tem
               |     | 20.0.1       | tem     |            | 20.0.1-tem
               |     | 17.0.8       | tem     | installed  | 17.0.8-tem
               |     | 17.0.8.1     | tem     |            | 17.0.8.1-tem
               |     | 17.0.7       | tem     | installed  | 17.0.7-tem
               |     | 17.0.4       | tem     | local only | 17.0.4-tem
               |     | 11.0.20      | tem     |            | 11.0.20-tem
               | &gt;&gt;&gt; | 11.0.20.1    | tem     | installed  | 11.0.20.1-tem
               |     | 11.0.19      | tem     | installed  | 11.0.19-tem
$ sdk install java 11.0.20.1-tem <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>SDKMAN を導入します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>SDKMAN を環境に設定します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>導入できる Java のバージョンを一覧します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Java 11 系の最新バージョンを指定して Java を導入します。</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>また、この後で実行する Gradle ビルドツールが <code>JAVA_HOME</code> 環境変数に実行環境の Java のパスが設定されていることを期待していますので、利用しているシェル環境に合わせ <code>.bashrc</code> や <code>.zshrc</code> 等で次のように <code>JAVA_HOME</code> を設定します。</p>
</div>
<div class="listingblock">
<div class="title">手順. JAVA_HOME の設定</div>
<div class="content">
<pre class="rouge highlight"><code>$ vi ~/.bashrc <i class="conum" data-value="1"></i><b>(1)</b>
export JAVA_HOME=~/.sdkman/candidates/java/current <i class="conum" data-value="2"></i><b>(2)</b>
$ source ~/.bashrc <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>エディタで <code>.bashrc</code> や <code>.zshrc</code> を開きます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>本ラインをファイルの最下部に追加し保存終了します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>設定を適用します。<code>source</code> コマンドを使わず、ターミナルを再起動する操作でも反映されます。</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
Gradle は JAVA_HOME 環境変数を元に Java の実行環境を探すため、<code>java</code> コマンドを使うための PATH 環境変数は設定しなくてもかまいません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以上で準備完了です。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">SDKMAN について</div>
<div class="paragraph">
<p>SDKMAN は主に Java エコシステムの開発環境をコマンドラインから簡単に導入・設定するためにつくたれた管理ソフトウェアです。</p>
</div>
<div class="paragraph">
<p>たとえば次のように簡単に各種 Java のバージョンを導入し切り替えできます。</p>
</div>
<div class="listingblock">
<div class="title">手順. SDKMAN による Java のバージョン切り替え</div>
<div class="content">
<pre class="rouge highlight"><code>$ sdk install java 11.0.20.1-tem <i class="conum" data-value="1"></i><b>(1)</b>
$ sdk default java 11.0.20.1-tem <i class="conum" data-value="2"></i><b>(2)</b>
$ sdk default java 17.0.4.1-tem <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Java 11 を導入</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Java 11 をデフォルトに設定</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Java 17 をデフォルトに戻す</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_java_実行環境の導入windows">1.2. Java 実行環境の導入（Windows）</h3>
<div class="paragraph">
<p>もし Windows 環境に Java 実行環境がなければ AdoptOpenJDK プロジェクトが提供する OpenJDK のバイナリを導入すると良いでしょう。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://adoptopenjdk.net" class="bare">https://adoptopenjdk.net</a></p>
</div>
<div class="paragraph">
<p>Java™ is the world&#8217;s leading programming language and platform. The code for Java is open source and available at OpenJDK™. AdoptOpenJDK provides prebuilt OpenJDK binaries from a fully open source set of build scripts and infrastructure.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; AdoptOpenJDK
</div>
</div>
<div class="paragraph">
<p><code><a href="https://adoptopenjdk.net" class="bare">https://adoptopenjdk.net</a></code> サイトにブラウザでアクセスし、OpenJDK 11 (LTS) - HotSpot を選択した後、zip ファイルをダウンロードしてください。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter01/images/AdoptOpenJDK.png" alt="adopt" width="80%">
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>zip ファイルを任意の場所に展開します。ここでは <code>C:\develop\runtime\openjdk11</code> に展開したとします。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter01/images/windows-01.png" alt="導入先" width="70%">
</div>
</div>
<div class="paragraph">
<p>また、この後で実行する Gradle ビルドツールが <code>JAVA_HOME</code> 環境変数に実行環境の Java のパスが設定されていることを期待していますので、<span class="menuseq"><b class="menu">エクスプローラー</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">PC（右クリック）</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">プロパティー</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">詳細設定</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">環境設定</b></span> からユーザー環境変数に  <code>JAVA_HOME</code> を追加し、先ほど .zip を展開したパス（<code>C:\develop\runtime\openjdk11</code> ）を設定します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter01/images/windows-02.png" alt="環境変数" width="60%">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
Gradle は JAVA_HOME 環境変数を元に Java の実行環境を探すため、<code>java</code> コマンドを使うための PATH 環境変数は設定しなくてもかまいません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以上で準備完了です。</p>
</div>
<div class="sect3">
<h4 id="_windows_環境の_wsl2_上の_ubuntu_を使う">1.2.1. Windows 環境の WSL2 上の Ubuntu を使う</h4>
<div class="paragraph">
<p>Windows 環境では WSL2 Linux 仮想環境上の Ubuntu 22.04 を使うことでも環境構築が可能です。メインの執筆環境が macOS や Ubuntu の場合に、Windows 上でも WSL2 Ubuntu を使うと各種操作が統一できて便利かもしれません。</p>
</div>
<div class="paragraph">
<p>WSL2 に Ubuntu 22.04 LTS が導入済みであることを前提に、環境構築手順は次のようになります。</p>
</div>
<div class="listingblock">
<div class="title">WSL2 Ubuntu 22.04 LTS の初期設定</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt update
<span class="nv">$ </span><span class="nb">sudo </span>apt upgrade
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>language-pack-ja graphviz fontconfig fonts-noto<span class="k">*</span> language-selector-common <i class="conum" data-value="1"></i><b>(1)</b>
<span class="nv">$ </span><span class="nb">sudo </span>update-locale <span class="nv">LANG</span><span class="o">=</span>ja_JP.UTF8 <i class="conum" data-value="2"></i><b>(2)</b>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'export LANG=ja_JP.UTF-8'</span> <span class="o">&gt;&gt;</span> ~/.bashrc <i class="conum" data-value="3"></i><b>(3)</b>
<span class="nv">$ </span>fc-cache <span class="nt">-f</span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>日本語の言語設定とデフォルトフォント関連の導入。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>日本語ロケールを追加。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>起動シェル環境を <code>ja_JP.UTF-8</code> に設定。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>念のためフォントキャッシュを更新。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
これらの日本語ロケール設定は、後述のダイアログ表記を使う場合に出力される図表内のフォントが正しく配置されるように行っています。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次に、通常の Ubuntu の手順と同様に sdkman で Java 環境の導入を行います。</p>
</div>
<div class="listingblock">
<div class="title">WSL2 Ubuntu 22.04 LTS への Java の導入</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>curl <span class="nt">-s</span> <span class="s2">"https://get.sdkman.io"</span> | bash <i class="conum" data-value="1"></i><b>(1)</b>
<span class="nv">$ </span><span class="nb">source</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.sdkman/bin/sdkman-init.sh"</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="nv">$ </span>sdk <span class="nb">install </span>java 11.0.20.1-tem <i class="conum" data-value="3"></i><b>(3)</b>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'export JAVA_HOME=~/.sdkman/candidates/java/current'</span> <span class="o">&gt;&gt;</span> ~/.bashrc <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>SDKMAN を導入。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>SDKMAN を環境に設定。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Java 11 系を指定して Java を導入。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>JAVA_HOME</code> を設定。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>この操作後 <code>LANG</code> と <code>JAVA_HOME</code> 環境変数設定を反映させるため一度シェルを再起動してください。</p>
</div>
<div class="paragraph">
<p>以上で準備完了です。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
次項以降 WSL2 Ubuntu 環境を使う場合の手順は、特別な記載がある場合を除き Linux 項を参照して操作してください。
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">WSL2 Ubuntu 環境の作業ディレクトリ</div>
<div class="paragraph">
<p>WSL2 Ubuntu 上で文書の編集などを行う作業ディレクトリは、Ubuntu 側のホームディレクトリ（<code>/home/[ユーザ名]/</code>）配下が良いでしょう。 <code>/mnt/c/</code> から見える Windows 側のファイルシステムを作業フォルダとして使うこともできますが、I/O 処理速度がシミュレーションにより遅くなるため文書の変換処理のボトルネックになる場合があります。</p>
</div>
<div class="paragraph">
<p>この構成をとった場合、Windows 側のエクスプローラから Ubuntu のファイルシステムにアクセスする機能が便利です。エクスプローラの操作で、WSL2 上で作成した文書を Windows 側で簡単に取得できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter01/images/2023-09-17-13-43-06.png" alt="2023 09 17 13 43 06" width="80%">
</div>
<div class="title">画面. Windows エクスプローラからみた WSL2 ファイルシステム</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asciidoc_から_htmlpdf_文書を作成する">2. Asciidoc から HTML/PDF 文書を作成する</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_サンプル文書の変換を試す">2.1. サンプル文書の変換を試す</h3>
<div class="paragraph">
<p>本項では準備した環境を元に、Asciidoc 文書を HTML/PDF に変換する手順を示します。</p>
</div>
<div class="paragraph">
<p>変換に使うスクリプトは GitHub のリポジトリに公開されており、HTML/PDF 変換に使うファイル一式と、文書のサンプルとして "この文書" の Asciidoc ファイルが配置されています。</p>
</div>
<div class="paragraph">
<p>文書変換スクリプトの実行には、前項で導入した Java 上で動作する <strong>Gradle</strong> ビルドツールが使われ、リポジトリに含まれる <code>gradlew</code> シェルスクリプトを起点として各種設定が自動的に行われ、Asciidoc 文書から HTML/PDF 文書への変換が実行されます。本文書ではこれを、文書のビルドもしくは単純にビルドと呼ぶこととします。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>gradlew</code> コマンドは <code>gradlew [タスク名]</code> として実行したい機能を呼び分けられます。<code>docs</code> 部分はこの機能を用い、ビルドスクリプト内で文書ビルドのタスクと定義しています。タスク名称や操作の内容は、リポジトリ中の <code>build.gradle</code> ファイル中に含まれます。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>最初にリポジトリからこれらのファイルの取得を行い、次に Asciidoc 文書を HTML/PDF 変換するためにビルドを実行します。各 OS ごとの代表的な操作は次のようになります。</p>
</div>
<div class="sect3">
<h4 id="_サンプル文書の変換macos_linux">2.1.1. サンプル文書の変換（macOS / Linux）</h4>
<div class="paragraph">
<p>ターミナルを起動し <code>curl</code> コマンドでファイルの取得を行い、ファイルの展開とビルドの実行を行います。</p>
</div>
<div class="listingblock">
<div class="title">手順. PDF 変換ビルドスクリプトの取得と実行</div>
<div class="content">
<pre class="rouge highlight"><code>$ curl -L -O https://github.com/h1romas4/asciidoctor-gradle-template/archive/main.zip <i class="conum" data-value="1"></i><b>(1)</b>
$ unzip main.zip <i class="conum" data-value="2"></i><b>(2)</b>
$ cd asciidoctor-gradle-template-main <i class="conum" data-value="3"></i><b>(3)</b>
$ ./gradlew docs <i class="conum" data-value="4"></i><b>(4)</b>
BUILD SUCCESSFUL in 1m 13s <i class="conum" data-value="5"></i><b>(5)</b>
2 actionable tasks: 2 executed</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>リポジトリのファイルをダウンロードします。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ダウンロードした .zip ファイルを展開します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>カレントディレクトリを展開したフォルダの中に移します。フォルダ名は任意のものに変更可能です。本手順ではプロジェクトフォルダと呼称します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Gradle のビルドを実行します。初回実行時はビルドに必要なファイルをダウンロードするため少し時間がかかります。次回以降は 1分程度で完了します。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>BUILD SUCCESSFUL</code> が出力されれば文書変換が正常終了しています。</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_サンプル文書の変換windows">2.1.2. サンプル文書の変換（Windows）</h4>
<div class="paragraph">
<p>ウェブブラウザで URL にアクセスしてファイルの取得を行い、エクスプローラでファイルを展開し、最後にコマンドプロンプトから Gradle タスクを実行します。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Windows の場合 .zip ファイルの展開先はマルチバイト文字を含まないパスにしてください。JRuby の制約により変換処理がエラーとなります。また、プロジェクト内部で使うフォルダやファイル名のマルチバイト名も同様です。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ブラウザを使って <code><a href="https://github.com/h1romas4/asciidoctor-gradle-template/archive/main.zip" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template/archive/main.zip</a></code> にアクセスしリポジトリのファイルを取得します。</p>
</li>
<li>
<p>ダウンロードした .zip ファイルを右クリックし展開します。フォルダ名は任意のものに変更可能です。本手順ではプロジェクトフォルダと呼称します。</p>
</li>
<li>
<p>展開したフォルダ内をエクスプローラーで表示した上で、アドレスバーに <code>cmd.exe</code> もしくは <code>powershell.exe</code> と入力し、このフォルダをカレントディレクトリとしてコマンドプロンプトを起動します。</p>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/windows-01.png" alt="windows" width="70%">
</div>
</div>
</li>
<li>
<p><code>.\gradlew.bat docs</code> と入力しビルドを実行します。初回実行時はビルドに必要なファイルをダウンロードするため少し時間がかかります。次回以降は 1分程度で完了します。</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>&gt; .\gradlew docs
BUILD SUCCESSFUL in 1m 10s <i class="conum" data-value="1"></i><b>(1)</b>
2 actionable tasks: 2 executed</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>BUILD SUCCESSFUL</code> が出力されれば文書変換が正常終了しています。</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">プロキシーサーバーの設定</div>
<div class="paragraph">
<p>もしお使いのコンピューターがプロキシーサーバー経由のインターネットアクセスを行う場合は、次のコマンドを <code>./gradlew docs</code> をする前に入力してください。インターネットを使ったライブラリの取得が正しく行われるようになります。ホスト名（<code>example.com</code>） と ポート番号（<code>8080</code>）部分はそれぞれの環境に合わせてください。</p>
</div>
<div class="listingblock">
<div class="title">プロキシーサーバー設定（macOS / Linux）</div>
<div class="content">
<pre class="rouge highlight"><code>export JAVA_OPTS=-DproxyHost=example.com -DproxyPort=8080</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">プロキシーサーバー設定（Windows）</div>
<div class="content">
<pre class="rouge highlight"><code>set JAVA_OPTS=-DproxyHost=example.com -DproxyPort=8080</code></pre>
</div>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_変換後の文書">2.2. 変換後の文書</h3>
<div class="paragraph">
<p><code>./gradlew docs</code> のビルド操作により Asciidoc から変換された文書は、プロジェクトフォルダの <code>docs</code> 配下に HTML版(<code>index.html</code>)と PDF版（<code>index.pdf</code>）として格納されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/html.png" alt="html" width="80%">
</div>
<div class="title">画像.HTML 文書</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/pdf.png" alt="pdf" width="80%">
</div>
<div class="title">画像.PDF 文書</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>ビルド結果の出力先となる HTML/PDF 文書フォルダ（<code>docs</code>）フォルダの構成は次のとおりです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/directory-structure-1.svg" alt="directory structure 1" width="680px" height="341">
</div>
<div class="title">図. HTML/PDF 文書フォルダ（<code>docs</code>）</div>
</div>
<div class="paragraph">
<p>ビルド対象の文書となるソースフォルダ（<code>src/docs/asciidoc</code>）の構成は次のとおりです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/directory-structure-2.svg" alt="directory structure 2" width="590px" height="271">
</div>
<div class="title">図. ビルド対象のソースフォルダ（<code>src/docs/asciidoc</code>）</div>
</div>
<div class="paragraph">
<p>ビルドの基本的な動作は次のようになります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML/PDF 文書フォルダ（<code>docs</code>）内のファイルを全て削除する。</p>
</li>
<li>
<p>ソースフォルダ（<code>src/docs/asciidoc</code>）に配置された Asciidoc 文書と画像などのリソースを変換処理し、HTML/PDF 文書フォルダに格納する。</p>
<div class="ulist">
<ul>
<li>
<p>Asciidoc 文書に後述するダイアログ記法による図表が存在していた場合はベクター画像生成する。</p>
</li>
<li>
<p>HTML 版の文書は <code>docs/index.html</code> として生成。<code>docs/Chapter*/images</code> フォルダに配置した画像などのリソースをリンクする。</p>
</li>
<li>
<p>PDF 版の文書は <code>docs/index.pdf</code> として生成。フォントや画像リソースなど全てを PDF ファイル内に格納する。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>以上からビルドした文書の配布は次のようになります。</p>
</div>
<table class="tableblock frame-ends grid-none stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTML 版の文書</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs</code>フォルダの <code>index.pdf</code>を除く全てのファイルを配布。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PDF 版の文書</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs/index.pdf</code> のみを配布。</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>なおいずれの場合も <code>index.*</code> のファイル名は任意の名称に変更可能です。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>HTML/PDF 文書フォルダ（<code>docs</code>）はビルドした文書を配置する専用フォルダです。ソースフォルダと同期するためビルド時にいったん全てのファイルが削除されますので、<strong>自らが作成したファイルは配置しない</strong>ように注意してください。執筆で作成するファイルは必ず <code>src/docs/asciidoc</code> 配下に配置します。</p>
</div>
<div class="paragraph">
<p>なお、この後解説する Visual Studio Code テキストエディタでは、プロジェクト設定で <code>docs</code> フォルダをリードオンリーに指定し、誤ってファイルを追加・修正できないように制御してあります。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_テキストエディタで_asciidoc_文書を編集する">2.3. テキストエディタで Asciidoc 文書を編集する</h3>
<div class="sect3">
<h4 id="_visual_studio_code_の導入macos_linux_windows">2.3.1. Visual Studio Code の導入（macOS / Linux / Windows）</h4>
<div class="paragraph">
<p>Visual Studio Code（以下 VS Code）は、Microsoft が提供する高性能なフリーソフトウェアのテキストエディタです。</p>
</div>
<div class="paragraph">
<p>本手順のプロジェクトフォルダには VS Code 用の設定ファイル（<code>.vscode</code>配下）が配置されており、自動的に Asciidoc 文書向けの設定がされるように構成されています。</p>
</div>
<div class="paragraph">
<p>次のサイトからお使いの OS に合わせた VS Code を導入してください。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://code.visualstudio.com/" class="bare">https://code.visualstudio.com/</a></p>
</div>
<div class="paragraph">
<p>Free. Built on open source. Runs everywhere.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Visual Studio Code - Code Editing. Redefined
</div>
</div>
<div class="paragraph">
<p>インストールプロセスではオプションを次のように指定し、コンテキストメニューに VS Code を追加すると今後の操作が便利になります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-19-20-26-44.png" alt="2023 09 19 20 26 44" width="60%">
</div>
</div>
<div class="paragraph">
<p>VS Code ではプロジェクトとして「フォルダを開く」操作をよく活用します。このことから、エクスプローラなどのシェルのフォルダ右クリックのコンテキストメニューに VS Code を追加すると素早い操作ができるようになります。</p>
</div>
<div class="paragraph">
<p>以上で、VS Code の準備は完了です。</p>
</div>
</div>
<div class="sect3">
<h4 id="_visual_studio_code_の導入wsl2_ubuntu_環境">2.3.2. Visual Studio Code の導入（WSL2 Ubuntu 環境）</h4>
<div class="paragraph">
<p>WSL2 環境上の Ubuntu で VS Code を使う場合は「Windows 版 VS Code」を導入後さらに次の WSL 拡張をインストールします。この拡張に処理により、VS Code のバックエンド処理が Ubuntu 側で、フロントエンド画面が Windows 側で動作できるようになります。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" class="bare">https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl</a></p>
</div>
<div class="paragraph">
<p>The WSL extension lets you use VS Code on Windows to build Linux applications
that run on the Windows Subsystem for Linux (WSL).
You get all the productivity of Windows while developing with Linux-based tools, runtimes, and utilities.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; WSL - Visual Studio Marketplace
</div>
</div>
<div class="paragraph">
<p>拡張導入後、一度 VS Code を終了してください。</p>
</div>
<div class="paragraph">
<p>次に、WSL2 Ubuntu のターミナル画面で <code>code</code> コマンドを入力することで WSL2 Ubuntu 上で VS Code バックエンドの初期セットアップが動作し、その後 Windows 上で VS Code フロントエンド画面が立ち上がります。</p>
</div>
<div class="listingblock">
<div class="title">WSL2 Ubuntu 22.04 への VS Code サーバの導入</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>code <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>WSL Ubuntu 環境上から Windows 側の VS Code を起動する。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以上で、VS Code の準備は完了です。</p>
</div>
<div class="paragraph">
<p>ここから先の手順で VS Code を起動する場合は同様に WSL2 Ubuntu のターミナル画面から <code>code</code> コマンドで起動してください。</p>
</div>
<div class="listingblock">
<div class="title">リスト 1. WSL2 Ubuntu 22.04 からの VS Code 起動</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>asciidoctor-gradle-template <i class="conum" data-value="1"></i><b>(1)</b>
<span class="nv">$ </span>code <span class="nb">.</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>編集したいプロジェクトにカレントディレクトリを移します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>.</code> とカレントディレクトリを指定して VS Code を起動します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>なお、VS Code WSL2 拡張の詳細は次のドキュメントから得られます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://code.visualstudio.com/docs/remote/wsl" class="bare">https://code.visualstudio.com/docs/remote/wsl</a></p>
</div>
<div class="paragraph">
<p>The Visual Studio Code WSL extension lets you use the Windows Subsystem for Linux (WSL) as your full-time development environment right from VS Code. You can develop in a Linux-based environment, use Linux-specific toolchains and utilities, and run and debug your Linux-based applications all from the comfort of Windows.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Developing in the Windows Subsystem for Linux with Visual Studio Code
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_vs_code_による_asciidoc_文書のリアルタイムプレビュー">2.3.3. VS Code による Asciidoc 文書のリアルタイムプレビュー</h4>
<div class="paragraph">
<p>本手順のプロジェクトフォルダに配置された Asciidoc 文書は、VS Code を利用してリアルタイムに変換結果をプレビューしながら編集できるように設定されています。</p>
</div>
<div class="paragraph">
<p>最初のステップとして、プロジェクトフォルダを VS Code を開きます。VS Code でプロジェクトを開く場合は、次のように「フォルダで開く」などの操作でプロジェクトフォルダがルートになる形で行うことに注意します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-19-16-33-05.png" alt="2023 09 19 16 33 05" width="70%">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>プロジェクトフォルダのオープンは、エクスプローラなどのシェルからフォルダを右クリックして表示されるコンテキストメニューの <b class="button">Code で開く</b> 操作や、ターミナル画面からカレントディレクトリを <code>cd</code> コマンドで移動し <code>code .</code> と入力することでも可能です。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次に VS Code から推奨拡張機能に関する問い合わせが表示されますので、確認の上、次のような操作で導入してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><span class="menuseq"><b class="menu">このワークスペースには拡張機能の推奨事項があります。</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">すべてインストール</b></span> ボタンをクリックします。</p>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/vscode-extension1.png" alt="vscode">
</div>
</div>
<div class="paragraph">
<p>WSL2 Ubuntu 環境を使っている場合は合わせて WSL2 側にも拡張の導入を行います。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-17-13-30-33.png" alt="2023 09 17 13 30 33" width="60%">
</div>
</div>
</li>
<li>
<p><b class="button">再読み込み</b> ボタンをクリックします。</p>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/vscode-extension2.png" alt="vscode">
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>VS Code のリアルタイムプレビュー設定は <code>.vscode/settings.json</code> ファイルで、導入推奨拡張は <code>.vscode/extensions.json</code> ファイルで定義されています。</p>
</div>
<div class="paragraph">
<p>これらのファイルを修正することで、例えば拡張に日本語校正やスペルチェックを追加し設定を定義するなど、執筆メンバーの執筆環境を揃えられます。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以上で Asciidoc 文書編集のための準備が完了しました。</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>VS Code 左パネルのエクスプローラーから、Asciidoc 文書（<code>src/docs/asciidoc/index.adoc</code>など）を開き、文書を開いたエディタ部右上に配置された <b class="button">Open Preview to the Side</b>アイコンをクリックすると、画面右側に Asciidoc 文書の変換がリアルタイムに確認できるプレビューが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-24-15-34-04.png" alt="2023 09 24 15 34 04" width="70%">
</div>
<div class="title">画面. Asciidoc 拡張 Open Preview to the Side</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
プレビュー表示操作はキーボードショートカット <b class="button">Ctrl + k, v</b> でも可能です。また、画面右側ではなく現在のエディタグループに表示する場合は <b class="button">Ctrl + Shift + v</b> を押下します。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/vscode-asciidoc.png" alt="vscode asciidoc" width="80%">
</div>
<div class="title">画面. Asciidoc のリアルタイムプレビュー</div>
</div>
<div class="paragraph">
<p><code>.adoc</code> ファイルには本文書の内容がそのまま Asciidoc 文書形式で書かれているのが分かります。いくつか開いて試し入力などをしてみると、Asciidoc 文書のリアルタイムプレビューを含め執筆の雰囲気が掴めるはずです。</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_クリップボードからの画像挿入">2.3.4. クリップボードからの画像挿入</h4>
<div class="paragraph">
<p>本手順で VS Code の推奨拡張として導入される <a href="https://marketplace.visualstudio.com/items?itemName=mushan.vscode-paste-image">Paste Image</a>（<code>mushan.vscode-paste-image</code>） は、クリップボード上にある画像をファイルとして指定の位置に格納した上で、Asciidoc 文書にリンクを挿入する便利な拡張です。</p>
</div>
<div class="paragraph">
<p>特にコンピュータの操作手順文書をつくる場合に活用すると強力です。次のような簡単な操作でクリップボードの画像を Asciidoc 文書に挿入できます。サンプル文書内で操作を試してみると良いでしょう。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>スクリーンキャプチャなどの機能でクリップボードに画像を保持する。</p>
</li>
<li>
<p>VS Code で Asciidoc 文書を開き、<span class="menuseq"><b class="menu">VS Code</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">F1 キー押下</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Paste Image と入力</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">エンターキーで選択</b></span>する。</p>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-06-30-12-11-56.png" alt="2023 06 30 12 11 56">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Asciidoc 文書には画像リンクが挿入されるとともに、開いている Asciidoc 文書から相対で <code>images/</code> として見えるパスに画像ファイルが格納され、文書への画像挿入がひとつの操作で完了します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>image::2023-06-30-12-11-56.png[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>画像ファイル名の命名規約や出力先のフォルダ設定は <code>.vscode/setting.json</code> で行うことができます。</p>
</div>
<div class="listingblock">
<div class="title"><code>.vscode/setting.json</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"pasteImage.path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${currentFileDir}/images"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pasteImage.basePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${currentFileDir}/images"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pasteImage.defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Y-MM-DD-HH-mm-ss"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>なお、Asciidoc 拡張にも同様の機能（<span class="menuseq"><b class="menu">VS Code</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">F1 キー押下</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">AsciiDoc: Paste Image</b></span>）がありますが、現在のところ Paste Image 拡張のほうがファイル名などの設定が柔軟であることから、本手順では Paste Image を紹介しています。</p>
</div>
<div class="paragraph">
<p>AsciiDoc 版の Paste Image には現在の開いている Asciidoc の <code>:imagesdir:</code> 属性を見て設定無しでファイル配置場所を決定してくれるなど優れた機能もありますので、それぞれの機能を確認し必要に応じて使い分けると良いでしょう。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">クリップボード連携のシステムインターフェース</div>
<div class="paragraph">
<p>VS Code Paste Image 拡張のクリップボード連携のシステムインターフェースは次のシェルスクリプトで実装されています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-laF</span> ~/.vscode/extensions/mushan.vscode-paste-image-1.0.4/res
..snip..
<span class="nt">-rw-r--r--</span> 1 hiromasa hiromasa   492  6月 26  2021 linux.sh
<span class="nt">-rw-r--r--</span> 1 hiromasa hiromasa  1540  6月 26  2021 mac.applescript
<span class="nt">-rw-r--r--</span> 1 hiromasa hiromasa   680  6月 26  2021 pc.ps1
..snip..</code></pre>
</div>
</div>
<div class="paragraph">
<p>Asciidoc 拡張も <code>~/.vscode/extensions/asciidoctor.asciidoctor-vscode-2.9.8/res</code> 配下に同様のファイルがあります。これらの拡張のクリップボード連携は各 OS のクリップボード操作のコマンドを呼び出して動作しています。動作をご理解の上活用してください。</p>
</div>
<div class="paragraph">
<p>また、WSL2 Ubuntu と VS Code の WSL Remote 拡張を使った環境では、Paste Image は Windows - Ubuntu 間のクリップボードがそのままでは跨げないためうまく動作しません。</p>
</div>
<div class="paragraph">
<p>これを解決するためのワークアラウンドですが、次のように WSL2 側の Paste Image 拡張のファイルを書き換えると画像のクリップボード連携が動作するようになります。</p>
</div>
<div class="listingblock">
<div class="title"><code>~/.vscode-server/extensions/mushan.vscode-paste-image-1.0.4/res/linux.sh</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/sh</span>
<span class="c"># change current directory</span>
<span class="nb">cd</span> <span class="sb">`</span><span class="nb">dirname</span> <span class="nv">$0</span><span class="sb">`</span>
<span class="c"># set dist path</span>
<span class="nv">DISTPATH</span><span class="o">=</span>//wsl.localhost/Ubuntu-22.04 <i class="conum" data-value="1"></i><b>(1)</b>
<span class="c"># call Windows PowerShell</span>
powershell.exe <span class="nt">-ExecutionPolicy</span> Bypass <span class="nt">-File</span> pc.ps1 <span class="k">${</span><span class="nv">DISTPATH</span><span class="k">}</span><span class="nv">$1</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>利用しているディストリビューションのパスを設定する。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>なお、これは暫定的な方法のため拡張にアップデートがあると修正したファイルが戻って機能しなくなります。また <code>-ExecutionPolicy Bypass</code> 指定より PowerShell のセキュリティをバイパスして動作させています。ファイルをリードオンリーに指定するなどして、取扱いには注意してください。</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_統合ターミナルの活用">2.3.5. 統合ターミナルの活用</h4>
<div class="paragraph">
<p>VS Code には統合ターミナルと呼ばれる VS Code 画面内で使えるターミナルエミュレータが備わっており、エディターを離れることなく文書のビルドが可能です。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-20-15-30-52.png" alt="2023 09 20 15 30 52" width="60%">
</div>
<div class="title">画面. VS Code 統合ターミナルからの文書変換</div>
</div>
<div class="paragraph">
<p>統合ターミナルは <span class="menuseq"><b class="menu">表示</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">ターミナル</b></span> と操作して開きます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-20-15-26-40.png" alt="2023 09 20 15 26 40" width="60%">
</div>
<div class="title">画面. VS Code 統合ターミナルの起動</div>
</div>
<div class="paragraph">
<p>統合ターミナルはキーボードショートカット <b class="button">Ctrl + @</b> でも起動可能です。再度、同キーを押下することでクローズするトグル動作となっており、画面を広く使いたい執筆中に活用できます。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>統合ターミナル内で起動する一般的なシェル環境では、<b class="button">↑</b> を押下することで前回入力した履歴が呼び出せます。この操作は文書変換コマンドを再実行する際に便利です。</p>
</div>
</td>
</tr>
</table>
</div>
<hr>
<div class="sidebarblock">
<div class="content">
<div class="title">その他の Asciidoc 文書編集が可能な統合開発環境</div>
<div class="paragraph">
<p>本文書では VS Code を Asciidoc 文書編集用のエディタとして活用していますが、Eclipse や IntelliJ IDEA といった統合開発環境も Asciidoc を拡張機能でサポートしています。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-20-18-42-42.png" alt="2023 09 20 18 42 42" width="100%">
</div>
<div class="title">画像. IntelliJ IDEA の AsciiDoc Plugin で文書編集している例</div>
</div>
<div class="paragraph">
<p>好きな統合開発環境があればプロジェクトフォルダにそれぞれの環境定義を入れ、自分に合った執筆環境を構築してみてください。</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_文書のファイル構成">2.4. 文書のファイル構成</h3>
<div class="paragraph">
<p>以下に執筆で編集する Asciidoc 文書フォルダ（<code>src/docs/asciidoc</code> 配下）のファイル構成の詳細を示します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/directory-structure-3.svg" alt="directory structure 3" width="390px" height="358">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>src/docs/asciidoc/index.adoc <i class="conum" data-value="1"></i><b>(1)</b>
src/docs/asciidoc/attribute.adoc <i class="conum" data-value="2"></i><b>(2)</b>
src/docs/asciidoc/@style/asciidoctor.css <i class="conum" data-value="3"></i><b>(3)</b>
src/docs/asciidoc/@style/pdf-theme.yml <i class="conum" data-value="4"></i><b>(4)</b>
src/docs/asciidoc/@font/**/*.ttf <i class="conum" data-value="5"></i><b>(5)</b>
src/docs/asciidoc/Chapter{number}/index.adoc <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>文書を作成する起点となる Asciidoc 文書です。表紙となる文書のタイトルなどを記載し、その後から章ごとの Asciidoc 文書を <code>include</code> して構成していきます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>文書設定をするためのファイルです。各文書から <code>include</code> します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>HTML 出力とプレビュー用のスタイルシートです。文書に合わせて修正できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>PDF 文書に変換する際に使われるスタイル定義です。文書に合わせて修正できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>PDF 文書に埋め込みされるフォントファイルを配置します。<code>pdf-theme.yml</code> からファイル名で参照されています。TrueType フォント <code>.ttf</code> が指定できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>src/docs/asciidoc/index.adoc</code> から参照される子文書です。各子文書のフォルダ名は <code>Chapter{number}</code> とします。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>本構成を元に執筆したい文書に合わせカスタマイズしていきます。文書ファイルの編集や閲覧は VS Code のリアルタイムプレビューで確認しながら行うと分かりやすいでしょう。</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect3">
<h4 id="_文書属性定義">2.4.1. 文書属性定義</h4>
<div class="paragraph">
<p><code>src/docs/asciidoc/attribute.adoc</code> では文書のデフォルトキャプション名などの属性値を定義できます。画像挿入時の「図. 」など標準で付与される文字列がありますので、必要に応じて修正します。</p>
</div>
<div class="listingblock">
<div class="title"><code>src/docs/asciidoc/attribute.adoc</code></div>
<div class="content">
<pre class="rouge highlight"><code>..snip..
:preface-title: まえがき
:toc-title: 目次
:appendix-caption: 付録
:caution-caption: 注意
:example-caption: 例
:figure-caption: 図
..snip..</code></pre>
</div>
</div>
<div class="paragraph">
<p>Asciidoctor で利用可能な属性は次のドキュメントから参照できます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://asciidoctor.org/docs/user-manual/#attributes" class="bare">https://asciidoctor.org/docs/user-manual/#attributes</a></p>
</div>
<div class="paragraph">
<p>Attributes are one of the features that sets Asciidoctor apart from other lightweight markup languages. Attributes can activate features (behaviors, styles, integrations, etc) or hold replacement (i.e., variable) content.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; asciidoctor.org
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pdf_テーマ定義">2.4.2. PDF テーマ定義</h4>
<div class="paragraph">
<p><code>src/docs/asciidoc/@style/pdf-theme.yml</code> では PDF 文書のスタイルを定義できます。PDF 文書の紙サイズやマージン、フォント・行送り幅などの設定がありますので、必要に応じて修正します。</p>
</div>
<div class="paragraph">
<p>PDF テーマの詳細は次のドキュメントから参照できます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.asciidoctor.org/pdf-converter/latest/" class="bare">https://docs.asciidoctor.org/pdf-converter/latest/</a></p>
</div>
<div class="paragraph">
<p>Asciidoctor PDF Theming Guide</p>
</div>
</blockquote>
<div class="attribution">
&#8212; asciidoctor.org
</div>
</div>
<div class="paragraph">
<p><code>pdf-theme.yml</code> の修正は <code>.adoc</code> 修正時のビルドで PDF 文書に反映します。<code>pdf-theme.yml</code> の修正だけを反映したい場合は、いずれかの <code>.adoc</code> 文書に影響のない修正を加えてファイルを更新するか、 <code>./gradlew clean</code> してからビルドを実行してください。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
本手順で採用している Asciidoctor PDF のバージョンは <code>1.6.2</code> です。日本語禁則処理を正しく動作させるために、現在のところ最新の <code>2.3</code> にはなっていません。新しい Theming Guide ドキュメントの属性や動作とは乖離している場合があることに注意してください。
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_執筆の開始">2.5. 執筆の開始</h3>
<div class="paragraph">
<p>一通りのサンプル文書の構成確認が終われば、次のような流れで新しい執筆を開始できるでしょう。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>サンプル文書の <code>src/docs/asciidoc/Chapter02</code> 以降のフォルダの削除を行い見通しを良くする。</p>
</li>
<li>
<p><code>src/docs/asciidoc/index.adoc</code> からの 1. で削除した <code>Chapter*</code> の<code>include</code> を削除する。</p>
</li>
<li>
<p><code>src/docs/asciidoc/index.adoc</code> で文書のタイトルや版数などを設定する。</p>
</li>
<li>
<p><code>src/docs/asciidoc/Chapter00/index.adoc</code> を空にして目次前に挿入される「はじめに」や「本書の読み方」等の執筆。</p>
</li>
<li>
<p><code>src/docs/asciidoc/Chapter01/index.adoc</code> を空にして本編の執筆を開始。</p>
</li>
<li>
<p>事前に目次案がある場合は、このタイミングで <code>Chapter*</code> フォルダと対応する <code>index.adoc</code> を新規作成し、目次案にあった章や節などの大項目のみを準備するのも良い方法です。目次が完成し全体の把握がしやすくなります。</p>
</li>
<li>
<p>ここで一度 <code>./gradlew docs</code> を行い、想定通りの HTML/PDF 文書が <code>docs/</code> 内に生成されていることを確認する。外観の修正点があれば、</p>
<div class="ulist">
<ul>
<li>
<p>文書形式の場合は <code>src/docs/asciidoc/attribute.adoc</code> を調整。</p>
</li>
<li>
<p>PDF テーマの場合は <code>src/docs/asciidoc/@style/pdf-theme.yml</code> を調整。</p>
</li>
<li>
<p>HTML テーマの場合は <code>src/docs/asciidoc/@style/asciidoctor.css</code> を調整。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_執筆のイテレーション">2.6. 執筆のイテレーション</h3>
<div class="paragraph">
<p>ここまでの手順で執筆環境が整った後、毎日の執筆の進め方は次のようになります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトフォルダを VS Code で開く。</p>
</li>
<li>
<p><code>src/docs/asciidocs</code> 配下の Asciidoc 文書を VS Code でプレビューしながら執筆する。</p>
<div class="ulist">
<ul>
<li>
<p>Chapter が増えた場合は <code>src/docs/asciidocs/index.adoc</code> に Chapter を追記し、<code>src/docs/asciidocs/Chapter*/index.adoc</code> ファイルを新規追加する。</p>
</li>
<li>
<p>画像ファイルが必要な場合は、<code>src/docs/asciidocs/Chapter*/images</code> フォルダに追加する。<br>
画像の追加は VS Code の Paste Image 拡張を用いることで、クリップボード経由で自動的に行えます。</p>
</li>
</ul>
</div>
</li>
<li>
<p>文書執筆の一定の区切りをもって <code>./gradlew docs</code> で文書のビルドを行い、HTML/PDF 文書を <code>docs/index.html</code> や <code>docs/index.pdf</code> で推敲する。</p>
<div class="ulist">
<ul>
<li>
<p><code>./gradlew docs</code> の入力は VS Code の統合ターミナルが使えます。</p>
</li>
</ul>
</div>
</li>
<li>
<p>必要ならばプロジェクトディレクトリを Git などのバージョン管理下として、コミットを行う。</p>
</li>
<li>
<p>本日の執筆を終え、明日はまた 1. に戻る。</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">文書の推敲</div>
<div class="paragraph">
<p>文書の推敲は、iPad などのペンシルデバイスを持つ機械に PDF 文書ファイルを転送して「赤入れ」すると便利です。さらに、Dropbox や OneDrive などのクラウドストレージにファイルを配置すると執筆環境と推敲情報を共有できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-13-14-48-50.png" alt="2023 09 13 14 48 50">
</div>
<div class="title">画面. iPad の Goodnotes アプリによる PDF 文書の推敲</div>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_文書の_git_管理">2.7. 文書の Git 管理</h3>
<div class="paragraph">
<p>執筆中の文書をインターネット上に配置した Git リポジトリで管理すると次のようなメリットがあります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>文書の修正差分、版数管理ができる。</p>
</li>
<li>
<p>信頼できる場所にバックアップ・情報保全がされる。</p>
</li>
<li>
<p>クラウド環境での執筆が可能になる。</p>
</li>
<li>
<p>複数環境での執筆、及び共同執筆時にファイルの混乱がなくなる。</p>
</li>
<li>
<p>GitHub Actions などの CI 機能を使い継続的な文書の公開ができる。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>本項では Git リポジトリとして GitHub サービスを使うことを例に、文書のプロジェクトファイルを Git 管理する手順を示します。</p>
</div>
<div class="sect3">
<h4 id="_git_クライアントの導入">2.7.1. Git クライアントの導入</h4>
<div class="paragraph">
<p>お使いの PC に Git クライアントが未導入の場合は、次の手順でインストールします。</p>
</div>
<div class="listingblock">
<div class="title">macOS（ターミナルエミュレータで実行）</div>
<div class="content">
<pre class="rouge highlight"><code>brew install git</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Linux（ターミナルエミュレータで実行）</div>
<div class="content">
<pre class="rouge highlight"><code># Ubuntu
sudo apt install git</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Windows（PowerShell ウインドウで実行）</div>
<div class="content">
<pre class="rouge highlight"><code>winget install --id Git.Git -e --source winget</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git クライアントの導入後、次のドキュメントを参考に GitHub アカウントへの公開鍵設定を行ってください。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" class="bare">https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account</a></p>
</div>
<div class="paragraph">
<p>新しい (または既存の) SSH キーを使うように GitHub.com 上のアカウントを構成するには、アカウントにキーを追加する必要もあります。</p>
</div>
</blockquote>
<div class="attribution">
&#8212; GitHub アカウントへの新しい SSH キーの追加
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_github_上に文書用のリポジトリを作成">2.7.2. GitHub 上に文書用のリポジトリを作成</h4>
<div class="paragraph">
<p>GitHub にログインし、各自のホーム画面から <span class="menuseq"><b class="menu">Repositories</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">New</b></span> を押下します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-11-51.png" alt="2023 09 12 12 11 51" width="80%">
</div>
<div class="title">画面. GitHub の Repositories</div>
</div>
<div class="paragraph">
<p>Create a new repository 画面で Repository name を入力し、リポジトリが公開（Public）か非公開（Private）かを選択し、最後にページ下にある <b class="button">Create repository</b> を押下します。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
ここではリポジトリ名として <code>wasm-micro-book</code> を、公開範囲を執筆者のみが文書ファイルが閲覧・操作が可能となる <code>Private</code> を選択しました。なお、公開範囲に Public を指定した場合は、インターネット上の全てのユーザから文書ファイルの読み取りが可能になりますので注意します。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-17-12.png" alt="2023 09 12 12 17 12" width="80%">
</div>
<div class="title">画面. GitHub の Create a new repository</div>
</div>
<div class="paragraph">
<p>リポジトリの作成が終わると画面が遷移して "…or create a new repository on the command line" 項が現れます。次項の手順で必要になりますので、表示されたコマンドをクリップボード等に保持します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-23-52.png" alt="2023 09 12 12 23 52" width="80%">
</div>
<div class="title">画面. GitHub の Quick setup</div>
</div>
</div>
<div class="sect3">
<h4 id="_github_上に文書を初期プッシュ">2.7.3. GitHub 上に文書を初期プッシュ</h4>
<div class="paragraph">
<p>GitHub リポジトリに文書を配置するため、VS Code で PC 上の文書が配置されているプロジェクトフォルダを開き、統合ターミナルから以下のコマンドでローカルの Git リポジトリを初期化します。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
プロジェクトフォルダは、ルートに <code>gradlew</code> などの本手順のビルドスクリプトが配置されている構成になっていることを確認します。変換スクリプトやフォルダ構成ごと Git にコミットすることで、いずれの執筆環境でも HTML/PDF 変換処理ができるようになります。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">VS Code 統合ターミナルから Git リポジトリを初期化</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">git init
git config <span class="nt">--local</span> user.name h1romas4 <i class="conum" data-value="1"></i><b>(1)</b>
git config <span class="nt">--local</span> user.email h1romas4@gmail.com <i class="conum" data-value="2"></i><b>(2)</b>
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s1">'initial commit'</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>h1romas4</code> 任意の名前に変更。Git コミットログの記載される氏名になります。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>h1romas4@gmail.com</code> 同上。Git コミットログに記載されるメールアドレスになります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ローカルの Git リポジトリの初期化完了後、続けて統合ターミナルで前項「GitHub の Create a new repository」画面でクリップボード等に保持したコマンドを実行し、GitHub リモートリポジトリーにプロジェクトファイル一式をプッシュ操作します。</p>
</div>
<div class="listingblock">
<div class="title">VS Code 統合ターミナルから GitHub にプッシュ</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">git remote add origin git@github.com:h1romas4/wasm-micro-book.git <i class="conum" data-value="1"></i><b>(1)</b>
git branch <span class="nt">-M</span> main
git push <span class="nt">-u</span> origin main</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>h1romas4/wasm-micro-book.git</code> 部分が前項で作成したリポジトリ名になります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以上で GitHub リポジトリーへの文書の配置が完了しました。ウェブブラウザーで GitHub リポジトリにアクセスしすると、プッシュした文書ファイルがあることが確認できるでしょう。</p>
</div>
</div>
<div class="sect3">
<h4 id="_修正したファイルのコミットプッシュ">2.7.4. 修正したファイルのコミット・プッシュ</h4>
<div class="paragraph">
<p>Git によるファイル管理を始めた後、VS Code 上で文書の編集を行うと修正や追加のあったファイルが左のサイドバーに通知されます。</p>
</div>
<div class="paragraph">
<p>この修正を Git に反映させるために、<b class="button">+</b> で Git 上にステージングし、任意のコミットコメントを記載して <b class="button">Commit</b> を押下するコミット操作を行います。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-49-52.png" alt="2023 09 12 12 49 52" width="50%">
</div>
<div class="title">画面. VS Code のファイル修正通知と Git へのステージング</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-51-08.png" alt="2023 09 12 12 51 08" width="50%">
</div>
<div class="title">画面. VS Code から Git へのコミット</div>
</div>
<div class="paragraph">
<p>コミットはローカル上の Git に対して行われます。この後 GitHub のリモートリポジトリに反映させるため <b class="button">Sync Changes</b> を押下しプッシュ操作を行います。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
プッシュ操作を行うまで GitHub リモートリポジトリには文書の修正が反映されません。忘れずに実施してください。操作に慣れるまでは、プッシュ操作後にウェブブラウザで GitHub リポジトリにアクセスしファイルの更新を確認すると良いでしょう。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-12-12-58-10.png" alt="2023 09 12 12 58 10" width="50%">
</div>
<div class="title">画面. VS Code から GitHub Repository へのプッシュ</div>
</div>
<div class="paragraph">
<p>なお、<b class="button">Sync Changes</b> ボタン押下操作の他、統合ターミナルから <code>git push</code> コマンドを入力することでも同様の結果が得られます。</p>
</div>
<div class="listingblock">
<div class="title">統合ターミナルから <code>git push</code> を実行</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">git push</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_異なる執筆環境での_git_操作">2.7.5. 異なる執筆環境での Git 操作</h4>
<div class="paragraph">
<p>異なる執筆環境から GitHub リポジトリの文書を取得するには次の操作を行います。</p>
</div>
<div class="paragraph">
<p>その環境で初めて執筆する場合は、GitHub 上のリポジトリをクローンしプロジェクトフォルダを得る。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">git clone git@github.com:h1romas4/wasm-micro-book.git <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>h1romas4/wasm-micro-book.git</code> 部分が前項で作成したリポジトリ名になります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>別の執筆環境からの修正（プッシュ）を取得するために <code>git pull</code> 操作を行う。</p>
</div>
<div class="listingblock">
<div class="title">統合ターミナルから <code>git pull</code> を実行</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">git pull</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>個人の執筆活動における Git 初歩としては「執筆開始前に必ず <code>git pull</code>」「執筆区切りで <code>commit</code> と <code>push</code>」 と覚えることで十分機能するはずです。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_git_による文書の差分比較">2.7.6. Git による文書の差分比較</h4>
<div class="paragraph">
<p>Git 管理された文書ファイルはコミットごとに履歴が取得され、各履歴ごとの差分比較が可能です。</p>
</div>
<div class="paragraph">
<p>VS Code では統合ターミナルと同列のパネルに配置されたタイムラインから履歴をダブルクリックすることで、Git コミットごとの修正前後の比較ができます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-21-18-08-23.png" alt="2023 09 21 18 08 23" width="80%">
</div>
<div class="title">画面. VS Code タイムラインパネル</div>
</div>
<div class="paragraph">
<p>タイムラインには標準で Git の履歴とともに、ファイル上書き保存ごとの修正差分も表示されます。状況に応じてパネル右上のフィルター項目からそれぞれの表示可否を選択してください。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-21-18-12-59.png" alt="2023 09 21 18 12 59" width="50%">
</div>
<div class="title">画面. VS Code タイムラインパネルのフィルター</div>
</div>
<div class="paragraph">
<p>また Git コミット時に使うソース管理パネルでも、ファイルをダブルクリックすることでコミット前後の差分が表示され修正内容を確認できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-21-18-31-16.png" alt="2023 09 21 18 31 16" width="80%">
</div>
<div class="title">画面. VS Code ソース管理パネル</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>もし共同著者間での文書マージ操作等、より高度な Git の操作が必要になってきた場合は、ウェブサイトや書籍から Git についての優れたドキュメントが得られます。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_クラウド環境による執筆">2.8. クラウド環境による執筆</h3>
<div class="paragraph">
<p>クラウド開発環境である <a href="https://www.gitpod.io/">Gitpod</a> や GitHub の <a href="https://github.co.jp/features/codespaces">Codespaces</a> を活用すると、ローカル環境の準備なしにウェブブラウザだけで執筆と HTML/PDF 文書のビルドが可能です。このことから、サブマシンや iPad などタブレット端末でも執筆活動が行えます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://www.gitpod.io/" class="bare">https://www.gitpod.io/</a></p>
</div>
<div class="paragraph">
<p>The developer platform for on-demand cloud development environments. Create software faster and more securely.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Gitpod
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://github.co.jp/features/codespaces" class="bare">https://github.co.jp/features/codespaces</a></p>
</div>
<div class="paragraph">
<p>超高速で構築するクラウド開発環境</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Codespaces | GitHub
</div>
</div>
<div class="sect3">
<h4 id="_gitpod">2.8.1. Gitpod</h4>
<div class="paragraph">
<p>Gitpod クラウド上での執筆にあたっての条件は次のとおりです。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>文書ファイル一式を GitHub、GitLab、Bitbucket のいずれかに配置する必要があります。（プライベートリポジトリも利用可能です）</p>
</li>
<li>
<p>2023-07 現在 Gitpod の無料枠は 50時間/月です。最新情報は <a href="https://www.gitpod.io/pricing" class="bare">https://www.gitpod.io/pricing</a> から確認できます。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>準備ができれば、次の要領で URL を作成しウェブブラウザでアクセスするとクラウド環境が起動します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>https://gitpod.io/new/#https://github.com/h1romas4/asciidoctor-gradle-template <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>URL の先頭に <code><a href="https://gitpod.io/new/#" class="bare">https://gitpod.io/new/#</a></code> という Gitpod の URL を前置し、その後の <code><a href="https://github.com/h1romas4/asciidoctor-gradle-template" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template</a></code> 部分に自身の GitHub リポジトリ URL を付与してウェブブラウザの URL 欄に貼り付けます。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
上記記載通りの URL にアクセスすると本手順のリポジトリで Gitpod クラウドを試用できます。なお、リポジトリには筆者以外の書き込み権がついていないため Git への文書修正操作は試せません。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-07-03-14-28-22.png" alt="2023 07 03 14 28 22">
</div>
<div class="title">画像.ウェブブラウザ上で起動した VS Code と Asciidoc 拡張（Gitpod）</div>
</div>
<div class="paragraph">
<p>本手順向けの VS Code 用の推奨拡張が自動導入されるように設定されていますので、特に操作をせずそのまま文書の執筆が開始できます。</p>
</div>
<div class="paragraph">
<p>また合わせて、統合ターミナルから文書のビルドができるようコンテナ環境も自動設定されます。ターミナルに以下の表示が出力されれば準備完了です。同ターミナルで <code>./gradlew docs</code> することによりローカル環境と同様に HTML/PDF の文書変換が開始されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#</span>
<span class="c"># asciidoctor-gradle-template</span>
<span class="c">#</span>
<span class="c"># Setup Done! Build document here. (./gradlew docs)</span>
<span class="c">#</span>
<span class="c"># It will build correctly, if the following conditions 'OK'</span>
<span class="c">#</span>
<span class="c">#  Java(openjdk): OK</span>
<span class="c">#  Dialog Font(Noto Sans CJK JP): OK</span>
<span class="c">#  LANG(ja_JP.UTF-8): OK</span>
<span class="c">#</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
これらの Gitpod 向けの設定は <code>.gitpod.yml</code> ファイルで定義されています。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_codespaces">2.8.2. Codespaces</h4>
<div class="paragraph">
<p>Codespaces クラウド上での執筆にあたっての条件は次のとおりです。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>文書ファイル一式を GitHub に配置する必要があります。（プライベートリポジトリも利用可能です）</p>
</li>
<li>
<p>2023-07 現在 Codespaces の無料枠はおおよそ 60時間/月ほどです。最新情報は各自の GitHub アカウント <a href="https://github.com/settings/billing" class="bare">https://github.com/settings/billing</a> の Codespaces 項から確認できます。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>準備ができれば、GitHub サイトにログインした上でファイル一式をコミットしたリポジトリを開き <span class="menuseq"><b class="menu">Code</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Codespaces</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Create codespace on ブランチ名</b></span> を押下します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-11-18-58-47.png" alt="2023 09 11 18 58 47" width="80%">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<a href="https://github.com/h1romas4/asciidoctor-gradle-template" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template</a> にアクセス後、上記の操作を行うと、本手順のリポジトリで Codespaces クラウドを試用できます。なお、リポジトリには筆者以外の書き込み権がついていないため Git への文書修正操作は試せません。
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>ボタン押下後コンテナのビルドに画面が遷移し、完了するとウェブブラウザー上で VS Code が起動します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-11-19-06-20.png" alt="2023 09 11 19 06 20">
</div>
<div class="title">画像.ウェブブラウザ上で起動した VS Code と Asciidoc 拡張（Codespaces）</div>
</div>
<div class="paragraph">
<p>前項の Gitpod と同様に VS Code の拡張は自動導入され、文書のビルド用のコンテナ環境も構築されます。コンテナ環境の構築中は統合ターミナルに以下のような表示がされ、終了とともに自動的に閉じられます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Use Cmd/Ctrl + Shift + P -&gt; View Creation Log to see full logs
✔ Finishing up...
   Running postCreateCommand...
 <span class="o">&gt;</span> bash .devcontainer/build-codespaces-container.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>文書のビルドは本処理が終了後、新しい統合ターミナルを開き環境が日本語設定になっていることを確認の上 <code>./gradlew docs</code> を実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$LANG</span>
ja_JP.UTF-8 <i class="conum" data-value="1"></i><b>(1)</b>
<span class="nv">$ </span>fc-match Dialog
NotoSansCJK-Regular.ttc: <span class="s2">"Noto Sans CJK JP"</span> <span class="s2">"Regular"</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="nv">$ </span>./gradlew docs <i class="conum" data-value="3"></i><b>(3)</b>
<span class="c"># ..snip..</span>
BUILD SUCCESSFUL <span class="k">in </span>3m 19s</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>ja_JP.UTF-8</code> になっていること</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Noto Sans CJK JP</code> になっていること</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文書のビルドを開始</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>統合ターミナルの環境が日本語設定になっていない場合、文書中のダイアログ記法で生成された図表の日本語出力が崩れる場合があります。</p>
</div>
<div class="paragraph">
<p>クラウド環境初期後に自動的に開かれる統合ターミナルは日本語設定が反映していないため、文書のビルドを行う場合は混乱がないように <code>exit</code> コマンドで一旦閉じた上で統合ターミナルを再起動すると良いでしょう。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
Codespaces 向けの設定は <code>.devcontainer/devcontainer.json</code> 及び <code>.devcontainer/build-codespaces-container.sh</code> ファイルで定義されています。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_クラウド環境でのファイル保存と執筆の再開">2.9. クラウド環境でのファイル保存と執筆の再開</h3>
<div class="paragraph">
<p>クライド環境上での文書ファイルの保存は、基本的に Git のコミット・プッシュ操作になります。通常の <b class="button">Ctrl + s</b> のファイル保存操作とともに、一区切りの間隔で Git のコミットとプッシュの操作を行うのを忘れないようにしてください。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
Git プッシュの操作を行わずにウェブブラウザーを閉じてしまった場合はファイルが失われる可能性があります。十分注意をしてください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>とは言ってもウェブブラウザのタブは閉じやすいもの。もしうっかり閉じてしまった場合は、GitHub にログインした状態で以下の URL にアクセスしてください。</p>
</div>
<div class="paragraph">
<div class="title">Gitpod の場合</div>
<p><a href="https://gitpod.io/workspaces" class="bare">https://gitpod.io/workspaces</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-11-20-13-04.png" alt="2023 09 11 20 13 04" width="80%">
</div>
</div>
<div class="paragraph">
<div class="title">Codespaces の場合</div>
<p><a href="https://github.com/codespaces" class="bare">https://github.com/codespaces</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-11-20-10-35.png" alt="2023 09 11 20 10 35" width="80%">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
クラウド上で起動していた環境は最終利用時からある一定期間（数日）は残ります。この動作を利用して未コミット・プッシュのファイルを取り戻せます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>一覧画面にはこれまで使っていた環境が表示されますので、選択して「開く」操作をしてください。どちらも右の三点リーダメニューより、Gitpod では <b class="button">Open</b>、Codespaces では <span class="menuseq"><b class="menu">Open in</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Open in browser</b></span> を押下すると、未プッシュのファイルとともに環境が復元します。</p>
</div>
<div class="paragraph">
<p>また、コミット・プッシュ済みに関わらず、翌日執筆を再開する際もこれらの画面から環境をリオープンします。クラウドのリソース削減になるとともに、これまでの VS Code の操作状態が維持されているため時間の短縮にもなります。</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sidebarblock">
<div class="content">
<div class="title">VS Code の Zen Mode</div>
<div class="paragraph">
<p>VS Code には執筆に集中したい場合に、不要な UI を隠しながらフルスクリーン表示をする Zen Mode があります。標準のキーアサインでは <b class="button">Ctrl + k, z</b> でモードが遷移し、再度同じ操作もしくは <b class="button">Esc</b> 2回押下で元の画面に戻ります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-07-02-15-09-43.png" alt="2023 07 02 15 09 43" width="90%">
</div>
</div>
<div class="paragraph">
<p>Zen Mode は、VS Code や OS の不要なコンポーネントが見えなくなり画面が広く使えること、また思考を遮る要素がなくなることから快適な執筆をする上での良いツールとなることでしょう。</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_github_actions_によるビルド">2.10. GitHub Actions によるビルド</h3>
<div class="paragraph">
<p>本手順のリポジトリに含まれるファイル <code>.github/workflows/gradle.yml</code> 及び <code>.github/workflows/release.yml</code> は GitHub サーバ上で文書のビルドテスト、及び <code>.tar.gz</code> 形式での HTML/PDF 文書のリリースを行うための定義ファイルです。</p>
</div>
<div class="paragraph">
<p>これらのファイルを文書ファイルとともに各自のプロジェクト GitHub リポジトリにコミットすることで、文書変換とファイルリリースが git の操作を契機として GitHub サーバ上で自動的に動作するようになります。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>本項「GitHub Actions によるビルド」機能の利用は必須ではありません。大人数で継続的に執筆を行いたいケースなどに採用してみてください。HTML/PDF 変換処理の自動化やファイルリリースの版数管理で大きな力を発揮することでしょう。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_文書ファイルの変換テストと検査gradle_yml">2.10.1. 文書ファイルの変換テストと検査（gradle.yml）</h4>
<div class="paragraph">
<p>git による main ブランチへの push 操作を契機に自動的に動作する文書変換テストです。macOS、Linux、Windows のそれぞれの環境で、Java 11 と 17 においてビルドが試行され、一定の検査が行われます。</p>
</div>
<div class="paragraph">
<p>環境はマトリクスになっており、計 6 環境でのテストでビルドが正しいかが確認され GitHub Actions 上のログやメール通知で結果が得られます。自分の執筆環境以外のさまざまな環境で、文書のビルドが実行できることへの確信が持てるはずです。</p>
</div>
<div class="paragraph">
<p>検査に関しては、文書が生成されたかを基本として確認を行い、文書の内容自体に対しては行われません。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML、PDF 文書ファイルが生成されるか。</p>
</li>
<li>
<p>後述の asciidoctor-diagram による .svg 画像生成が動作したか。</p>
</li>
<li>
<p>GitHub Actions ログへのファイル数、一覧の出力。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>検査は以下の部分で行われます。文書に合わせたさらなる検査が必要な場合はシェルスクリプトでカスタマイズしてください。</p>
</div>
<div class="listingblock">
<div class="title"><code>.github/workflows/gradle.yml</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yml"><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Check</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">bash</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">find docs/ -type f -ls</span>
    <span class="s">find docs/ -type f -ls | wc</span>
    <span class="s"># test asciidoctor-diagram (If you are not using diagram, comment out the next)</span>
    <span class="s">find docs/ -type f -ls | egrep 'svg$' </span><i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s"># test asciidoctor</span>
    <span class="s">file docs/index.pdf | grep PDF</span>
    <span class="s">file docs/index.html | grep HTML</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>asciidoctor-diagram を使った .svg 図表が生成されているかの検査。文書中で使用していない場合は削除するか、コメントアウトしてください。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>また 次の部分で PDF 文書のメタデータの出力を行うサンプルを組み込んでいます。PDF 文書に不要なメタデータが含まれていないか等の確認が行えます。</p>
</div>
<div class="listingblock">
<div class="title"><code>.github/workflows/gradle.yml</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yml"><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Output PDF information</span>
  <span class="na">if</span><span class="pi">:</span> <span class="s">startsWith(matrix.os, 'ubuntu')</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">echo "# PDF information"</span>
    <span class="s">pdfinfo docs/index.pdf</span>
    <span class="s">echo "# URLs in document"</span>
    <span class="s">pdfinfo -url docs/index.pdf | tail -n +2 | awk '{ print $3 }' | sort | uniq</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
この部分は <code>pdfinfo</code> コマンドを活用している関係で Ubuntu ビルドのみ対応しています。また、合否確認は組み込んでいませんので必要であればカスタマイズしてください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>なお、文書が問題なく変換ができたことの証となる「バッジ」を以下のようにすることで画像として取得可能です。正常の場合はグリーンに、失敗の場合は赤で表示されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>https://github.com/[ユーザ名]/[リポジトリ名]/workflows/Build/badge.svg</code></pre>
</div>
</div>
<div class="paragraph">
<p>具体的には、本手順のリポジトリの GitHub 向けの README.adoc は次のようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>image::https://github.com/h1romas4/asciidoctor-gradle-template/workflows/Build/badge.svg[]</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-06-10-41-11.png" alt="2023 09 06 10 41 11">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_文書ファイルの自動リリースrelease_yml">2.10.2. 文書ファイルの自動リリース（release.yml）</h4>
<div class="paragraph">
<p>git のバージョンタグを push する操作を契機として、GitHub のリリースページに GitHub Actions 上の環境で変換処理された HTML/PDF 文書をアーカイブファイルとして GitHub のダウンロードページにリリースします。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter02/images/2023-09-24-16-11-46.png" alt="2023 09 24 16 11 46" width="80%">
</div>
<div class="title">画面. GitHub のリリースページに掲載された変換後の文書</div>
</div>
<div class="paragraph">
<p>ファイル名の <code>by-*</code> 以下の部分にはビルドした環境名が <code>by-windows-latest-java-11</code> や <code>by-macos-latest-java-17</code> のような形で付与されます。通常はひとつの環境でビルドした文書だけリリースできれば十分ですので、利用する時は次のマトリクスを変更してビルド環境を絞ってください。</p>
</div>
<div class="listingblock">
<div class="title"><code>.github/workflows/release.yml</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yml"><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">matrix</span><span class="pi">:</span>
        <span class="na">os</span><span class="pi">:</span> <span class="pi">[</span> <span class="nv">ubuntu-22.04</span><span class="pi">,</span> <span class="nv">windows-latest</span><span class="pi">,</span> <span class="nv">macos-latest</span> <span class="pi">]</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="na">java</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">11'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">17'</span> <span class="pi">]</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>os: [ windows-latest ]</code> とすると Windows のみでビルドされます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>java: [ '11' ]</code> とすると Java 11 のみでビルドされます。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>設定する OS や Java のバージョンは、メインで使われている執筆環境と合わせると良いでしょう。</p>
</div>
<div class="paragraph">
<p>本文書はテンプレートとして多くの環境での動作を担保するため、Ubuntu | Windows | macOS 上のそれぞれの Java 11 | 17 の計 6 環境で文書のビルドと確認を実施しています。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>リリースされる文書のファイル名や付与されるバージョン番号については、スクリプトの次の部分で指定されています。執筆する文書に合わせて変更してください。</p>
</div>
<div class="listingblock">
<div class="title"><code>.github/workflows/release.yml</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yml"><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set archive attribute</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">get-attr</span>
  <span class="na">shell</span><span class="pi">:</span> <span class="s">bash</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s"># document filename</span>
    <span class="s">echo "doc-name=asciidoctor-gradle-book" &gt;&gt; $GITHUB_OUTPUT </span><i class="conum" data-value="1"></i><b>(1)</b>
    <span class="s"># document version from git tag</span>
    <span class="s">echo "version=${GITHUB_REF#refs/*/}" &gt;&gt; $GITHUB_OUTPUT </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>asciidoctor-gradle-book</code> 部分が出力されるファイル名に前置されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Git のタグ名がそのままバージョン名となります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>本リリースの機能を使い頒布や出版時にタグを打つことで、その時点のファイル断面がダウンロード可能な形で永続化できます。文書の版管理に活用してください。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-structure">3. Asciidoc 記法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoc ではテキスト中に特定の記法を挿入することで文書表現や付随情報を追加しながら執筆を進めます。</p>
</div>
<div class="paragraph">
<p>本項では Asciidoc 文書で利用可能な記法の中で、この文書で使われている表現を取り上げて解説します。初めは本文書を手元に置いて、使いたい部分からコピーアンドペーストするのも良い方法です。</p>
</div>
<div class="paragraph">
<p>また、Asciidoc 記法の入力の助けになるよう、プロジェクトフォルダの <code>.vscode/asciidoc.code-snippets</code> 設定には VS Code の <b class="button">Ctrl + Space</b> 操作で補完可能な形式で Asciidoc 記法のスニペットが格納されています。プロジェクトで定形の記法があれが追加・修正すると便利でしょう。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter03/images/2023-09-14-18-52-05.png" alt="2023 09 14 18 52 05" width="60%">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
補完文字列は他の補完と区別しやすいよう <code>ag-</code> が先頭に付与されています。補完操作後、最初に <code>ag-</code> と入力することで一覧できます。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_ドキュメントヘッダーとセクションタイトル">3.1. ドキュメントヘッダーとセクションタイトル</h3>
<div class="paragraph">
<p>文書名を表すドキュメントヘッダーや、章やチャプターを表すセクションタイトルは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>= AsciidoctorとGradleでつくる文書執筆環境 <i class="conum" data-value="1"></i><b>(1)</b>

== はじめに <i class="conum" data-value="2"></i><b>(2)</b>
<i class="conum" data-value="3"></i><b>(3)</b>
本文書は Asciidoc とその Ruby による実装である... <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ドキュメントヘッダー</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>セクションタイトル</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>本文との間には空行を入れる。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>ここから本文。</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>本文書で提供される <code>.adoc</code> はドキュメントタイプが <code>book</code> に指定され、<code>=</code>（レベル 0）がドキュメントヘッダー（文書名）となり、それ移行がセクションタイトルとなります。<br>
なお、ドキュメントタイプは <code>attribute.adoc</code> の <code>:doctype: book</code> で指定されています。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_段落">3.2. 段落</h3>
<div class="paragraph">
<p>文章の段落は改行でコントロールします。新しい段落にする場合は改行のみの空行を挿入します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>こんにちは。
<i class="conum" data-value="1"></i><b>(1)</b>
吾輩は段落である。（ここには空行はない） <i class="conum" data-value="2"></i><b>(2)</b>
名前はまだない。</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>空行により「こんにちは。」が段落となる。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>空行がない行は同一段落として扱われる。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>こんにちは。</p>
</div>
<div class="paragraph">
<p>吾輩は段落である。（ここには空行はない）
名前はまだない。</p>
</div>
</div>
<div class="sect2">
<h3 id="_文章中のテキストフォーマット">3.3. 文章中のテキストフォーマット</h3>
<div class="sect3">
<h4 id="_コマンドやファイル名などの等角フォント">3.3.1. コマンドやファイル名などの等角フォント</h4>
<div class="paragraph">
<p>文中に現れるコマンドやファイル名などは <code>コマンド</code> で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>``コマンド``</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_強調">3.3.2. 強調</h4>
<div class="paragraph">
<p>文中の<strong>強調</strong>は <code>**</code> で括ることで記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>文中の**強調**は ``**`` で括ることで記述します。</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_エスケープ">3.3.3. エスケープ</h4>
<div class="paragraph">
<p>文章中に Asciidoc 記法で使われる文字列と同一の文字が存在し、意図せず Asciidoc として解釈されてしまう場合は、<code>\</code> でエスケープすることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>...参照リンクは参照先に ``\[[ラベル名]]`` を付与して...</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;参照リンクは参照先に <code>[[ラベル名]]</code> を付与して&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_文書中の相互参照">3.4. 文書中の相互参照</h3>
<div class="paragraph">
<p><code>.adoc</code> 文書内の参照リンクは参照先に <code>[[ラベル名]]</code> を付与して設定します。HTML/PDF 上はクリックリンクが生成されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[[project-structure]] <i class="conum" data-value="1"></i><b>(1)</b>
== Asciidoc 記法

[[introduction]] <i class="conum" data-value="2"></i><b>(2)</b>
== はじめに

&lt;&lt;project-structure,章の冒頭&gt;&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;&lt;Chapter01/index.adoc#introduction,はじめに&gt;&gt; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>同一 <code>.adoc</code> 内での内部参照用のラベル定義と参照</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ファイルを跨いだ場合のラベル参照</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>リンクの例</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#project-structure">章の冒頭</a> を参照してください･･･</p>
</li>
<li>
<p><a href="#introduction">はじめに</a> で述べたように･･･</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_外部リンク">3.5. 外部リンク</h3>
<div class="paragraph">
<p>インターネット上の URL 文字列は自動的にリンクに変換されます。</p>
</div>
<div class="paragraph">
<p><a href="https://h1romas4.github.io/asciidoctor-gradle-template/index.html" class="bare">https://h1romas4.github.io/asciidoctor-gradle-template/index.html</a></p>
</div>
<div class="paragraph">
<p>次のように URL の末尾に <code>[]</code> を定義すると指定した文字列からのリンクとなります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>https://h1romas4.github.io/asciidoctor-gradle-template/index.html[AsciidoctorとGradleでつくる文書執筆環境]</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://h1romas4.github.io/asciidoctor-gradle-template/index.html">AsciidoctorとGradleでつくる文書執筆環境</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
PDF の印刷を考慮する場合は、文字列リンクを用いると URL の情報が消えてしまうため、次項の引用機能を用いると良いでしょう。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_引用">3.6. 引用</h3>
<div class="paragraph">
<p>外部の文献を参照する引用は次のように記述します。執筆している文書が紙面となり、引用先がウェブサイトの場合はいずれかの位置に URL を掲載します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[quote, Asciidoctor Documentation Site]
____
https://docs.asciidoctor.org/

Welcome to the Asciidoctor documentation site! Here you can find the reference material, guides, and examples to write content in AsciiDoc and publish it using Asciidoctor. This documentation will help you start your journey with AsciiDoc or dive deeper if you're already well on your way.
____</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.asciidoctor.org/" class="bare">https://docs.asciidoctor.org/</a></p>
</div>
<div class="paragraph">
<p>Welcome to the Asciidoctor documentation site! Here you can find the reference material, guides, and examples to write content in AsciiDoc and publish it using Asciidoctor. This documentation will help you start your journey with AsciiDoc or dive deeper if you&#8217;re already well on your way.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Asciidoctor Documentation Site
</div>
</div>
</div>
<div class="sect2">
<h3 id="_画像">3.7. 画像</h3>
<div class="paragraph">
<p>画像の挿入は、画像ファイルを編集中の <code>.adoc</code> 文書から相対パスでみた <code>images/</code> フォルダに格納した上で、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>image::2023-06-30-12-11-56.png[pdfwidth=70%, width=600px]</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>pdfwidth</code> 属性では PDF 紙面に対する幅の比率を、<code>width</code> 属性では HTML 文書中での幅の比率もしくはピクセル値を指定します。</p>
</div>
<div class="paragraph">
<p>なお、本手順の Asciidoc 文書の構成では <code>images</code> に格納されている画像ファイルパスに <code>images/</code> を付与する必要はありません。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
これは <code>src/docs/asciidoc/attribute.adoc</code> で <code>:imagesdir: ./images</code> が設定済みであるための動作です。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>また、ブロックタイトルと画像を組み合わせることで画像キャプションを追加できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>.VS Code の IntelliSense <i class="conum" data-value="1"></i><b>(1)</b>
[caption="画像. "] <i class="conum" data-value="2"></i><b>(2)</b>
image::2023-09-14-18-52-05.png[pdfwidth=70%, width=70%]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ブロックタイトルを指定</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>キャプションを指定</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter03/images/2023-09-14-18-52-05.png" alt="2023 09 14 18 52 05" width="70%">
</div>
<div class="title">画像. VS Code の IntelliSense</div>
</div>
</div>
<div class="sect2">
<h3 id="_ソースコードシンタックスハイライト">3.8. ソースコードシンタックスハイライト</h3>
<div class="paragraph">
<p><code>[source]</code> ブロックを用いて文書中にソースコードをシンタックスハイライト付きで埋め込みます。また、ソースコードに <code>// &lt;1&gt;</code> などのコメント形式でソースコード下部に対応する説明が記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[source, javascript]
[caption=""]
.JavaScript ソースコードのシンタックスハイライトの例
----
function hello() { // &lt;1&gt;
    console.log("Hello, World!"); // &lt;2&gt;
}
----

&lt;1&gt; 関数定義
&lt;2&gt; コンソールに ``Hello, World`` を出力</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">JavaScript ソースコードのシンタックスハイライトの例</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello, World!</span><span class="dl">"</span><span class="p">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>関数定義</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>コンソールに <code>Hello, World</code> を出力</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_メニューボタン">3.9. メニュー・ボタン</h3>
<div class="paragraph">
<p>コンピュータの操作で使われる <span class="menuseq"><b class="menu">メニュー</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">File</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Open</b></span> や <b class="button">OK</b> ボタンなどは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>menu:メニュー[File &gt; Open]

btn:[OK] ボタン</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>この表現は Asciidoc のマクロで実装されており、<code>attribute.adoc</code> の <code>:experimental:</code>（実験的） 指定で有効にされています。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ファイルインクルード">3.10. ファイルインクルード</h3>
<div class="paragraph">
<p><code>.adoc</code> ファイルから別のファイルをインクルードできます。ソースコードや後述のダイアグラム形式などを別ファイルとして切り出すのに便利です。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
Gradle のファイル更新監視は <code>.adoc</code> からインクルードされたファイルまでは及びません。インクルード先のファイルだけを書き換えた場合は <code>./gradlew docs</code> が処理なしで終了してしまいますので、この場合は <code>./gradlew clean</code> と <code>clean</code> タスクを起動し <code>docs</code> フォルダをクリーニングしてから再ビルドしてください。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[source, rust]
----
include::source/hello.rs[]
----</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">インクルードにより挿入されたソースコードの例</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_表形式">3.11. 表形式</h3>
<div class="paragraph">
<p>表形式は次のようなコードで定義します。データ形式、罫線表現に関していくつかの属性が設定できます。</p>
</div>
<div class="listingblock">
<div class="title">表形式の例1（CSV 形式、ヘッダーなし、グリッドなし）</div>
<div class="content">
<pre class="rouge highlight"><code>[format="csv",cols="1,2"]
[frame="topbot",grid="none"]
[caption=""]
.表形式の例1
|======
キー1,バリュー1
キー2,バリュー2
キー3,バリュー3
|======</code></pre>
</div>
</div>
<table class="tableblock frame-ends grid-none stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">キー1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリュー1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">キー2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリュー2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">キー3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリュー3</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>cols="1,2"</code> 指定することでカラムの比率を <code>1:2</code> に設定しています。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">表形式の例2（ヘッダーあり、グリッドあり、ストライプなし）</div>
<div class="content">
<pre class="rouge highlight"><code>[cols="1,2", options="header", stripes="none"]
[frame="topbot"]
[caption=""]
.表形式の例2
|======
|カラム名1
|カラム名2

|キー1
|バリュー1

|キー2
|バリュー2
|======</code></pre>
</div>
</div>
<table class="tableblock frame-ends grid-all stripes-none stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">カラム名1</th>
<th class="tableblock halign-left valign-top">カラム名2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">キー1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリュー1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">キー2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリュー2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>cols="1,2a"</code> のように <code>a</code> を付与したセルは Asciidoc 記法がそのまま反映します。</p>
</div>
<div class="listingblock">
<div class="title">表形式の例3（Asciidoc 形式セル）</div>
<div class="content">
<pre class="rouge highlight"><code>[cols="1,2a", options="header"]
[frame="topbot"]
|======
|通常カラム
|Asciidoc 形式付きカラム

|
. リスト1
. リスト2
|
. リスト1
. リスト2
|======</code></pre>
</div>
</div>
<table class="tableblock frame-ends grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">通常カラム</th>
<th class="tableblock halign-left valign-top">Asciidoc 形式付きカラム</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">. リスト1
. リスト2</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>リスト1</p>
</li>
<li>
<p>リスト2</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_リスト">3.12. リスト</h3>
<div class="paragraph">
<p>箇条書き表現は次のように記述します。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
Asciidoc はリスト中にリスト継続マーカ（<code>+</code>）を使うことでブロックのネストが可能です。手順を順序ありリストで表現し、順序やインデントを維持しながら画像や表形式などの挿入をします。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>. 手順1
. 手順2
+
リスト継続1
+
image::2023-06-30-15-39-26.png[pdfwidth=60%, width=60%]
. 手順3
.. 箇条書きのネスト1
... 箇条書きのネスト2
*** 順序なしリスト1
*** 順序なしリスト2</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>手順1</p>
</li>
<li>
<p>手順2</p>
<div class="paragraph">
<p>リスト継続1</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter03/images/2023-06-30-15-39-26.png" alt="2023 06 30 15 39 26" width="60%">
</div>
</div>
</li>
<li>
<p>手順3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>箇条書きのネスト1</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>箇条書きのネスト2</p>
<div class="ulist">
<ul>
<li>
<p>順序なしリスト1</p>
</li>
<li>
<p>順序なしリスト2</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_脚注">3.13. 脚注</h3>
<div class="paragraph">
<p>補足点を脚注するいくつかの表現があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>NOTE: メモ

TIP: チップス

IMPORTANT: 重要

WARNING: 警告

CAUTION: 注意</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
メモ
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
チップス
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
重要
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
警告
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
注意
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>脚注が長文になる場合は次のようにブロックを用います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[NOTE]
====
改行を含む脚注です。

吾輩は脚注である。名前はまだ無い。
====</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>改行を含む脚注です。</p>
</div>
<div class="paragraph">
<p>吾輩は脚注である。名前はまだ無い。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_改ページブレイク表現">3.14. 改ページ・ブレイク表現</h3>
<div class="paragraph">
<p>改ページは次の記述で挿入します。PDF 文書のみに効果があり HTML 文書には影響しません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>&lt;&lt;&lt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ブレイク表現（水平線）は HTML/PDF 文書のどちらでも有効です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>'''</code></pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_ラベル文言">3.15. ラベル文言</h3>
<div class="paragraph">
<p>特定のラベル文言に対して定義を明記する表現は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>対応 OS::
    macOS、Linux、Windows 対応
対応 JDK::
    11 、17、21 の各 LTS バージョン</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">対応 OS</dt>
<dd>
<p>macOS、Linux、Windows 対応</p>
</dd>
<dt class="hdlist1">対応 JDK</dt>
<dd>
<p>11 、17、21 の各 LTS バージョン</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_コラム表現">3.16. コラム表現</h3>
<div class="paragraph">
<p>Asciidoc のサイドバーとブロックタイトル記法を組み合わせ、コラム表現を挿入します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>.コラム
****
ブロックを使ってコラム表現を挿入します。

吾輩はコラムである。名前はまだ無い。
****</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">コラム</div>
<div class="paragraph">
<p>ブロックを使ってコラム表現を挿入します。</p>
</div>
<div class="paragraph">
<p>吾輩はコラムである。名前はまだ無い。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_コメント行">3.17. コメント行</h3>
<div class="paragraph">
<p>成果物に現れない Asciidoc 文書へのコメントは次のように文頭に <code>//</code> で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>// TODO: さらに Asciidoc 記法を追加していくこと。</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ダイアグラム記法">4. ダイアグラム記法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ダイアグラム記法は、図表をソースコードから出力できる特別なマークアップです。Asciidoc と同様に文書ファイル中のテキスト形式で "描ける" ことから、修正や差分管理がしやすいという利点があります。</p>
</div>
<div class="paragraph">
<p>本項では <strong>PlantUML</strong> と <strong>ditaa</strong> ダイアグラム記法を用いて、技術文書で使われやすい表現のいくつかの記述例を示します。</p>
</div>
<div class="paragraph">
<p>文書のビルドではダイアログ記法をサポートする <strong>asciidoctorj-diagram</strong> が有効になっており、PlantUML と ditta ダイアグラム記法を追加の操作無しで使えます。また、PDF 出力時に日本語が化けないよう自動的にフォントパッチが適用されるよう構成されています。</p>
</div>
<div class="paragraph">
<p>Asciidoc 文書内でダイアグラムを SVG ベクター画像で出力する指定は次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[ダイアグラム種類, 出力ファイル名, svg, pdfwidth=70%, width=480px]  <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b>
----
// ダイアグラム記法のソースコード
----</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ダイアグラム種類には <code>plantuml</code> か <code>ditta</code> を指定する。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>pdfwidth</code> は PDF 紙面に対しての比率指定、<code>width</code> は HTML 上の幅比率もしくはピクセル（<code>px</code>）で指定する。</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
出力ファイル名は <code>images</code> フォルダ内で一意になるように設定してください。特にダイアログ記法を別の場所からコピーアンドペーストした場合は要チェックです。同名ファイル名が指定された場合は上書きされる動作になります。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次項から PlantUML や ditta 記法を使って描いた実際のダイアグラム図表とソースコードを紹介します。コピーアンドペーストして使いやすいよう各ダイアグラム内で頻出する記法をなるべくピックアップする形で描いています。作成したい図表と似たようなものからアレンジして使うと良いでしょう。</p>
</div>
<div class="paragraph">
<p>PlantUML と ditta 記法の詳細な仕様については、次のドキュメントから得られます。</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://plantuml.com/ja/" class="bare">https://plantuml.com/ja/</a></p>
</div>
<div class="paragraph">
<p>PlantUML in a nutshell</p>
</div>
</blockquote>
<div class="attribution">
&#8212; PlantUML
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://ditaa.sourceforge.net/" class="bare">https://ditaa.sourceforge.net/</a></p>
</div>
<div class="paragraph">
<p>DIagrams Through Ascii Art by Stathis Sideris</p>
</div>
</blockquote>
<div class="attribution">
&#8212; ditaa
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_シーケンス図">4.1. シーケンス図</h3>
<div class="paragraph">
<p>シーケンス図を PlantUML ダイアグラム記法で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-sequence-sample2, svg, pdfwidth=70%, width=70%]
[caption=""]
----
@startuml diag-sequence-sample2
skinparam monochrome true
hide footbox
participant "ブラウザ\n閲覧者" as browser
participant "baserCMS" as basercms
entity データーベース as Entity
participant "ブラウザ\n管理者" as admin
== コンテンツ閲覧==
browser -&gt; basercms: 表示リクエスト
basercms -&gt; basercms: リクエスト処理
basercms -&gt; Entity: SQL 発行
Entity -&gt; basercms: コンテンツ取得
note right of basercms: バックエンド処理とフロントエンド向け処理（HTML生成）を\n同じシーケンスで行う
basercms -&gt; basercms: テーマテンプレート処理
basercms -&gt; browser: HTML/CSS 返却
== コンテンツ管理==
admin -&gt; basercms: 管理画面リクエスト
basercms &lt;-&gt; Entity: データーベース更新
basercms -&gt; admin: 管理画面 HTML/CSS 返却
@enduml
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-sequence-sample2.svg" alt="diag sequence sample2" width="70%" height="560">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">PlantUML ダイアグラムのリアルタイムプレビュー編集</div>
<div class="paragraph">
<p>本手順の VS Code の推奨プラグインとなっている PlantUML 拡張（<code>jebbs.plantuml</code>）を使うと、PlantUML のダイアグラム記法も VS Code 上でリアルタイムプレビューできます。</p>
</div>
<div class="paragraph">
<p>プレビュー処理をするために必要な PlantUML サーバは Docker コンテナで起動すると便利でしょう。なお、Gradle による文書のビルドでは内蔵の PlantUML ライブラリが使われますので本サーバーが起動している必要はありません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker run <span class="nt">-d</span> <span class="nt">--rm</span> <span class="nt">-p</span> 8080:8080 plantuml/plantuml-server:jetty</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>.vscode/setting.json</code> は次のようにポート <code>8080</code> で PlantUML サーバが起動されることを期待して構成してあります。</p>
</div>
<div class="listingblock">
<div class="title"><code>.vscode/setting.json</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w"> </span><span class="nl">"plantuml.server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8080"</span><span class="w"> </span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>文書で使う PlantUML ダイアグラムを <code>.puml</code> 拡張子で保存することで Asciidoc と同様にプレビューアイコンが表示され、プレビュー画面ではリアルタイムに <code>.puml</code> ファイルの修正が反映されます。</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_フォルダファイルツリー">4.2. フォルダ・ファイルツリー</h3>
<div class="paragraph">
<p>フォルダ・ファイルツリーを PlantUML の Salt 記法で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-salt-sample1, svg, pdfwidth=30%, width=280px]
[caption=""]
----
' https://github.com/iconic/open-iconic/
@startsalt diag-salt-sample1
{
{T
 + &lt;&amp;folder&gt; wp-admin
 + &lt;&amp;folder&gt; wp-content
 ++ &lt;&amp;folder&gt; themes
 +++ &lt;&amp;folder&gt; my-theme   | 新規作成
 ++++ &lt;&amp;file&gt; style.css   | 新規作成
 ++++ &lt;&amp;file&gt; index.php   | 新規作成
 ++ &lt;&amp;folder&gt; uploads
 + &lt;&amp;folder&gt; wp-includes
 + &lt;&amp;file&gt; .htaccess      | 自動作成
 + &lt;&amp;file&gt; index.php
}
}
@endsalt
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-salt-sample1.svg" alt="diag salt sample1" width="280px" height="184">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_数式">4.3. 数式</h3>
<div class="paragraph">
<p>数式を PlantUML の AsciiMath 記法で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[plantuml, math-sample1, svg, pdfwidth=70%, width=70%]
[caption=""]
----
@startmath math-sample1
f(t)=(a_0)/2 + sum_(n=1)^ooa_ncos((npit)/L)+sum_(n=1)^oo b_n\ sin((npit)/L)
@endmath
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/math-sample1.svg" alt="math sample1" width="70%" height="68">
</div>
</div>
<hr>
<div class="sidebarblock">
<div class="content">
<div class="title">PlantUML の Salt 記法のフォントサイズ</div>
<div class="paragraph">
<p>Salt は現在のところ残念ながらフォントサイズの指定ができません。このため任意のフォントサイズにするためには出力画像の <code>pdfwidth</code> と <code>width</code> を設定して算出する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>@startsalt
&lt;style&gt;
saltDiagram {
  FontSize 10 <i class="conum" data-value="1"></i><b>(1)</b>
}
&lt;/style&gt;
{
{T
 + &lt;&amp;folder&gt; wp-admin
}
}
@endsalt</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>未実装で効果がない</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_ブロック図">4.4. ブロック図</h3>
<div class="paragraph">
<p>ブロック図を ditaa 記法で記述します。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
ditta 内で日本語を使う場合は、表示ずれを防ぐため半角スペースなどで文字数を調整する必要があります。また、ドロップシャドー <code>shadows</code> 設定は HTML 版に対してのみ有効で、現在のところ PDF 版に対しては効果がないようです。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[ditaa, diag-ditaa-block, svg, shadows=true, separation=true, pdfwidth=70%, width=70%]
[caption=""]
----
+---------------------------------+
|     baserCMS Plugin, Theme      |
+----------------------------+    +
| cPNK   baserCMS Core       |    |
+----------------------------+----+
|            CakePHP              |
+---------------------------------+
|             MySQL               |
+---------------------------------+

/-------------+-------------\
|cRED RED     |cBLU BLU     |
+-------------+-------------+
|cGRE GRE     |cPNK PNK     |
+-------------+-------------+
|cBLK BLK     |cYEL YEL     |
\-------------+-------------/
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-ditaa-block.svg" alt="diag ditaa block" width="70%" height="294">
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[ditaa, diag-ditaa-block-2, svg, shadows=true, separation=true, pdfwidth=70%, width=70%]
[caption=""]
----
/--------------------------------\
|                                |
|          program.wasm          |
|   ^                        |   |
+---|------------------------|---+
|   |                        v   |
|       WebAssembly Runtime      |
|   ^                        |   |
+---|------------------------|---+
|   |                        v   |
|         clang/libc/SDK         |
|                            |   |
+----------------------------|---+
|                            v   |
| cGRE       Hardware            |
|                                |
\--------------------------------/
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-ditaa-block-2.svg" alt="diag ditaa block 2" width="70%" height="294">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_メモリーマップ">4.5. メモリーマップ</h3>
<div class="paragraph">
<p>メモリーマップを ditaa 記法で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[ditaa, diag-ditaa-memory-map, svg, shadows=true, separation=false, pdfwidth=70%, width=70%]
[caption=""]
----
0000H +-------------+ +-------------+ 0000H
      | cGRE        | |             |
      |             | |             |
      |             | |             |
      |             | |  BASIC ROM  |
      |             | |             |
      |             | |             |
      |             | |             |
8000H +- - - - - - -+ +-------------+ 8000H
      |  Main RAM   |
      |             |
      |             |
      |             |
      |             |
C000H +- - - - - - -+ +-------------+ C000H
      |             | |             ++
      |             | | VRAM 0,1,2  |++
F3C8H +-------------+ | BANK SELECT |||
      |  TEXT VRAM  | |             |||
FFFFH +-------------+ ++------------+||
                       ++------------+|
                        +-------------+
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-ditaa-memory-map.svg" alt="diag ditaa memory map" width="70%" height="364">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_ネットワーク構成図">4.6. ネットワーク構成図</h3>
<div class="paragraph">
<p>ネットワーク構成図を PlantUML の nwdiag で記述します。</p>
</div>
<div class="listingblock">
<div class="title"><code>diag-nwdiag-network1.puml</code> - <a href="https://github.com/h1romas4/asciidoctor-gradle-template/blob/master/src/docs/asciidoc/Chapter04/puml/diag-nwdiag-network1.puml">ソース</a> より簡略化</div>
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-nwdiag-network1, svg]
----
@startuml diag-network1
&lt;style&gt;
nwdiagDiagram {
    FontSize 14
    group {
        BackGroundColor cadetblue
    }
}
&lt;/style&gt;

nwdiag {
    internet [shape = cloud];
    internet -- router;
    router [address = "210.x.x.x"];
    network LAN {
        address = "192.168.0.0/24"
        router [address = "192.168.0.1"];
        thinkpad-p14s [address = "192.168.0.w"];
        minis-um690 [address = "192.168.0.x"];
        xbox-series-s [address = "192.168.0.y"];
        atom-server [address = "192.168.0.z", shape = database"]
    }
    network WLAN {
        address = "172.16.15.0/24"
        router [address = "172.16.15.1"];
        group {
            description = モバイル
            iphone01 [address = "172.16.15.w"];
            ipad01 [address = "172.16.15.x"];
        }
        group {
            color = "#add8e6"
            description = 据え置き
            fire01 [address = "172.16.15.y"];
            echo01 [address = "172.16.15.z"];
        }
    }
}
@enduml
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-nwdiag-network1.svg" alt="diag nwdiag network1" width="785" height="698">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_システム構成図">4.7. システム構成図</h3>
<div class="paragraph">
<p>簡単なシステム構成図を <a href="https://github.com/plantuml-stdlib/C4-PlantUML">PlantUML/C4 コンポーネント</a>で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-c4-component-sample1, svg]
[caption=""]
----
@startuml diag-c4-component-sample1
!include &lt;C4/C4_Container&gt;
!include &lt;office/users/users.puml&gt;
!include &lt;office/Servers/database_server&gt;
!include &lt;office/Servers/file_server&gt;
!include &lt;office/Servers/application_server&gt;
!include &lt;office/Concepts/service_application&gt;
!include &lt;office/Concepts/firewall&gt;
!include &lt;office/Devices/workstation&gt;

skinparam linetype ortho
top to bottom direction
'left to right direction
HIDE_STEREOTYPE()

AddContainerTag("user", $bgColor="#5f9ea0", $shadowing="true")
AddContainerTag("linux", $sprite="application_server", $bgColor="#dcdcdc", $fontColor="#000000", $borderColor="#696969", $sprite="file_server", $shadowing="true")

Person(user_person, "ウェブサイト\n閲覧者", $sprite="users", $tags="user")

System_Boundary(system_1, "Application") {
    Container_Boundary(bound_backend_1, "Backend") {
        ContainerDb(rel_db, "Database", "MySQL 8.0", $sprite="database_server", $tags="linux")
        Container(filesystem, "File System", "ext4", $tags="linux")
        Container(batch, "Bacth Server", "Java, Spring Boot", $tags="linux")
    }
    Container_Boundary(bound_frontend_1, "Frontend") {
        Container(load_balancer, "Load balancer", "nginx", $sprite="application_server", $tags="linux")
        Container_Boundary(bound_cluster_1, "Cluster") {
            Container(web_app_1, "Web Application", "Java, Spring Boot", $tags="linux")
            Container(web_app_2, "Web Application", "Java, Spring Boot", $tags="linux")
        }
    }
    Person(user_admnin, "アプリケーション\n管理者", $sprite="workstation", $tags="user")
}

Lay_R(user_person, system_1)
Lay_D(user_admnin, batch)
Lay_R(bound_backend_1, bound_frontend_1)

Lay_R(load_balancer, web_app_1)
Lay_D(web_app_1, web_app_2)
Lay_D(rel_db, filesystem)
Lay_R(rel_db, batch)

AddRelTag("rel_line", $textColor="black", $lineColor="#696969", $lineStyle=BoldLine())

Rel_R(user_person, load_balancer, "https", $tags="rel_line")
Rel_R(load_balancer, web_app_1, "http", $tags="rel_line")
Rel_R(load_balancer, web_app_2, "http", $tags="rel_line")

Rel_R(bound_cluster_1, rel_db, "JDBC", $tags="rel_line")
Rel_R(bound_cluster_1, filesystem, "NFS", $tags="rel_line")

Rel_R(batch, rel_db, "JDBC", $tags="rel_line")
Rel_R(user_admnin, batch, "ssh", $tags="rel_line")

@enduml
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-c4-component-sample1.svg" alt="diag c4 component sample1" width="1056" height="754">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
現在のところ <code>$shadowing="true"</code> 指定のドロップシャドーは HTML 版のみ反映します。
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_タイミングチャート">4.8. タイミングチャート</h3>
<div class="paragraph">
<p>デジタル回路などのタイミングチャートを PlantUML で記述します。</p>
</div>
<div class="listingblock">
<div class="title"><code>diag-timing-sample1.puml</code> - <a href="https://github.com/h1romas4/asciidoctor-gradle-template/blob/master/src/docs/asciidoc/Chapter04/puml/diag-timing-sample1.puml">ソース</a> より抜粋</div>
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-timing-sample1, svg, pdfwidth=90%, width=80%]
----
@startuml diag-timing-sample1
scale 40 as 150 pixels
clock "Clock" as clk with period 1
binary "CS" as CS
binary "WR" as WR
binary "RD" as RD
binary "A0" as A0
binary "A1" as A1
binary "IC" as IC
concise "DataBus" as DB

@0 as :start
@20 as :set_data_bus_1
@30 as :set_addr_1
@40 as :write_start_1
@60 as :write_end_1

@:start
IC is high
CS is high
WR is high
RD is high
A0 is low
A1 is low

@:set_data_bus_1
DB is "0xff"
DB -&gt; WR@+20
note bottom of DB : MCP23S17 GPIOB から

@:set_addr_1
A0 is high
A1 is low

@:write_start_1
CS is low : WR/CS 同時に設定
WR is low
DB@40 &lt;-&gt; @60 : {10 us}

@:write_end_1
CS is high
WR is high

highlight 40 to 60 #SkyBlue;line:DimGrey : 書き込み
@enduml
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-timing-sample1.svg" alt="diag timing sample1" width="80%" height="416">
</div>
</div>
<hr>
<div class="sidebarblock">
<div class="content">
<div class="title">Open Iconic アイコン</div>
<div class="paragraph">
<p>PlantUML 内で <code>&lt;&amp;アイコン名&gt;</code> 形式で使える Open Iconic アイコンは次の通りです。なお、アイコン名はこの文書が HTML 版の場合 <span class="menuseq"><b class="menu">ウェブブラウザ</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">右クリック</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">画像を開く</b></span> するとコピーアンドペーストで取得できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/open-iconic-list.svg" alt="open iconic list" width="951" height="578">
</div>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_マインドマップ">4.9. マインドマップ</h3>
<div class="paragraph">
<p>PlantUML のマインドマップ記法を使い木構造を表現します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[plantuml, diag-mindmap-sample1, svg]
[caption=""]
----
@startmindmap diag-mindmap-sample1
&lt;style&gt;
mindmapDiagram {
    FontSize 18
    .rose {
        BackgroundColor #ffbbcc
    }
}
&lt;/style&gt;
* ウェブブラウザー
** HTML
** CSS
** JavaScript
** &lt;&amp;star&gt; WebAssembly &lt;&lt;rose&gt;&gt;
@endjson
----</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="Chapter04/images/diag-mindmap-sample1.svg" alt="diag mindmap sample1" width="394" height="286">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_奥付">奥付</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>著者紹介</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">田中 広将（たなか ひろまさ）</dt>
<dd>
<p>ソフトウェア開発者。近年はハードウェア工作にも注目し、オープンソースハードウェアの公開なども行っている。座右の銘は「論よりラン」。</p>
</dd>
</dl>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1">Asciidoctor と Gradle でつくる執筆環境</dt>
<dd>
<p>2023年 10月 1日 v4.1.0 発行</p>
</dd>
</dl>
</div>
<table class="tableblock frame-ends grid-none stripes-none stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">著者</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">田中 広将</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">カバーデザイン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fujix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ライセンス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIT License</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">発行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/h1romas4/asciidoctor-gradle-template" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">連絡先</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/h1romas4/asciidoctor-gradle-template/issues" class="bare">https://github.com/h1romas4/asciidoctor-gradle-template/issues</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
バージョン 4.1.0<br>
最終更新 2023-09-25 20:28:02 +0900
</div>
</div>
</body>
</html>